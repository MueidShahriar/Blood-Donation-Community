<!DOCTYPE html>
<html lang="en" class="antialiased scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Blood Donation Community</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="shortcut icon" href="image/blood-drop.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --red-600: #e11d48;
            --red-500: #ef4444;
            --muted: #64748b;
            --glass: rgba(255, 255, 255, 0.6);
            --card-shadow: 0 14px 40px rgba(15, 23, 42, 0.12);
            --card-strong: 0 20px 60px rgba(15, 23, 42, 0.16);
            --radius-xl: 16px;
            font-synthesis: none;
        }

        html,
        body {
            height: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, #fff 0%, #f8fafc 60%);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            color: #0f172a;
        }

        body::-webkit-scrollbar {
            width: 12px;
            height: 12px
        }

        body::-webkit-scrollbar-track {
            background: transparent
        }

        body::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--red-600), var(--red-500));
            border-radius: 999px
        }

        /* Responsive site title */
        .site-title {
            display: inline-block;
            white-space: nowrap;
        }

        @media (max-width: 640px) {
            .site-title {
                white-space: normal;
                /* allow wrapping instead of cutting */
                max-width: 72vw;
                /* more room for text */
                overflow: visible;
                text-overflow: clip;
                font-size: 1.125rem;
                /* ~text-lg to keep header compact */
                line-height: 1.2;
            }

            .header-logo {
                width: 1.75rem;
                height: 1.75rem;
            }
        }

        @keyframes floaty {
            0% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-8px)
            }

            100% {
                transform: translateY(0)
            }
        }

        .animate-bounce-slow {
            animation: floaty 4s ease-in-out infinite
        }

        .rounded-xl {
            border-radius: var(--radius-xl) !important
        }

        .shadow {
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.10) !important
        }

        .shadow-sm {
            box-shadow: 0 6px 18px rgba(15, 23, 42, 0.08) !important
        }

        .shadow-lg {
            box-shadow: var(--card-shadow) !important
        }

        .shadow-xl {
            box-shadow: var(--card-strong) !important
        }

        article,
        .card,
        .bg-white {
            transition: transform .28s ease, box-shadow .28s ease
        }

        article:hover,
        .card:hover {
            transform: translateY(-6px)
        }

        #recentDonorCarousel .carousel-control-prev-icon,
        #recentDonorCarousel .carousel-control-next-icon {
            background-color: rgba(225, 29, 72, 0.12);
            border-radius: 999px;
            padding: 1.3rem;
            background-size: 50%
        }

        #recentDonorCarousel .carousel-indicators li {
            background-color: #ffdede
        }

        #recentDonorCarousel .carousel-indicators .active {
            background-color: var(--red-500)
        }

        #back-to-top {
            transition: opacity .25s ease, transform .15s ease;
            opacity: 0;
            transform: translateY(6px)
        }

        #back-to-top.show {
            opacity: 1;
            transform: translateY(0)
        }

        /* Safe-area aware positioning for the floating action button wrapper */
        #fab-wrap {
            position: fixed;
            bottom: max(1rem, env(safe-area-inset-bottom));
            right: max(1rem, env(safe-area-inset-right));
        }

        @supports not (bottom: max(1rem, 1rem)) {
            #fab-wrap {
                bottom: 1rem;
                right: 1rem;
            }
        }

        /* Add breathing room at the bottom on small screens so FAB doesn't obscure content */
        @media (max-width: 640px) {
            main {
                padding-bottom: 88px;
            }
        }

        .how-card {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), #fff);
            border: 1px solid rgba(239, 68, 68, 0.06);
            padding: 1.25rem;
            border-radius: 14px;
            box-shadow: 0 10px 28px rgba(15, 23, 42, 0.10) !important;
            transition: transform .38s cubic-bezier(.22, .61, .36, 1), box-shadow .38s ease;
            will-change: transform, box-shadow;
            cursor: default;
        }

        .how-card:hover {
            transform: scale(1.05);
            box-shadow: var(--card-strong), 0 0 0 6px rgba(239, 68, 68, 0.06) !important;
        }

        /* Softer hover/transition for cards that should feel calmer */
        .how-card.gentle {
            transition: transform .18s ease, box-shadow .18s ease;
        }

        .how-card.gentle:hover {
            transform: translateY(-2px) scale(1.02);
        }

        /* Compact card variant for tighter layouts */
        .how-card.compact {
            padding: 0.75rem;
        }

        .how-card .icon-circle {
            width: 56px;
            height: 56px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, rgba(239, 68, 68, 0.08), rgba(239, 68, 68, 0.03));
            box-shadow: 0 6px 18px rgba(14, 23, 32, 0.04)
        }

        /* Accent color helpers */
        .how-card.accent-rose {
            border-color: rgba(225, 29, 72, 0.10);
        }

        .how-card.accent-rose:hover {
            box-shadow: var(--card-strong), 0 0 0 6px rgba(225, 29, 72, 0.08) !important;
        }

        .how-card.accent-rose .icon-circle {
            background: linear-gradient(180deg, rgba(225, 29, 72, .16), rgba(225, 29, 72, .06));
            color: #e11d48;
        }

        .how-card.accent-amber {
            border-color: rgba(245, 158, 11, 0.10);
        }

        .how-card.accent-amber:hover {
            box-shadow: var(--card-strong), 0 0 0 6px rgba(245, 158, 11, 0.08) !important;
        }

        .how-card.accent-amber .icon-circle {
            background: linear-gradient(180deg, rgba(245, 158, 11, .16), rgba(245, 158, 11, .06));
            color: #f59e0b;
        }

        .how-card.accent-emerald {
            border-color: rgba(16, 185, 129, 0.10);
        }

        .how-card.accent-emerald:hover {
            box-shadow: var(--card-strong), 0 0 0 6px rgba(16, 185, 129, 0.08) !important;
        }

        .how-card.accent-emerald .icon-circle {
            background: linear-gradient(180deg, rgba(16, 185, 129, .16), rgba(16, 185, 129, .06));
            color: #10b981;
        }

        .how-card.accent-indigo {
            border-color: rgba(99, 102, 241, 0.10);
        }

        .how-card.accent-indigo:hover {
            box-shadow: var(--card-strong), 0 0 0 6px rgba(99, 102, 241, 0.08) !important;
        }

        .how-card.accent-indigo .icon-circle {
            background: linear-gradient(180deg, rgba(99, 102, 241, .16), rgba(99, 102, 241, .06));
            color: #6366f1;
        }

        .how-card.accent-sky {
            border-color: rgba(14, 165, 233, 0.10);
        }

        .how-card.accent-sky:hover {
            box-shadow: var(--card-strong), 0 0 0 6px rgba(14, 165, 233, 0.08) !important;
        }

        .how-card.accent-sky .icon-circle {
            background: linear-gradient(180deg, rgba(14, 165, 233, .16), rgba(14, 165, 233, .06));
            color: #0ea5e9;
        }

        .search-card.accent-sky {
            border-color: rgba(14, 165, 233, 0.12);
        }

        .search-card.accent-sky .icon-circle {
            background: linear-gradient(180deg, rgba(14, 165, 233, .16), rgba(14, 165, 233, .06));
            color: #0ea5e9;
        }

        /* Soft tints for card backgrounds */
        .how-card.tint-rose {
            background: linear-gradient(180deg, rgba(255, 241, 242, .92), #ffffff);
        }

        .how-card.tint-amber {
            background: linear-gradient(180deg, rgba(255, 251, 235, .92), #ffffff);
        }

        .how-card.tint-emerald {
            background: linear-gradient(180deg, rgba(236, 253, 245, .92), #ffffff);
        }

        .how-card.tint-indigo {
            background: linear-gradient(180deg, rgba(238, 242, 255, .92), #ffffff);
        }

        .how-card.tint-sky {
            background: linear-gradient(180deg, rgba(240, 249, 255, .92), #ffffff);
        }

        .search-card.tint-sky {
            background: linear-gradient(180deg, rgba(240, 249, 255, .92), #ffffff);
        }

        /* Small icon circle for compact cards (e.g., stats) */
        .icon-circle-sm {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, rgba(239, 68, 68, 0.10), rgba(239, 68, 68, 0.04));
            color: var(--red-600);
            box-shadow: 0 6px 16px rgba(14, 23, 32, 0.06);
            margin-bottom: 6px;
        }

        .stat-card.accent-indigo .icon-circle-sm {
            background: linear-gradient(180deg, rgba(99, 102, 241, .18), rgba(99, 102, 241, .06));
            color: #6366f1;
        }

        .stat-card.accent-rose .icon-circle-sm {
            background: linear-gradient(180deg, rgba(225, 29, 72, .18), rgba(225, 29, 72, .06));
            color: #e11d48;
        }

        .stat-card.accent-amber .icon-circle-sm {
            background: linear-gradient(180deg, rgba(245, 158, 11, .18), rgba(245, 158, 11, .06));
            color: #f59e0b;
        }

        .stats-panel {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 1.25rem;
            border-radius: 12px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8));
            box-shadow: 0 12px 36px rgba(2, 6, 23, 0.10)
        }

        .stats-grid {
            display: flex;
            gap: 1.5rem;
            align-items: center
        }

        .stat-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            min-width: 110px
        }

        .stat-card .num {
            font-size: clamp(1.8rem, 2.5vw, 2.2rem);
            font-weight: 900;
            letter-spacing: -0.02em;
            background: linear-gradient(180deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-card .label {
            font-size: .85rem;
            color: var(--muted);
            margin-top: 6px
        }

        .hero-cta {
            background: linear-gradient(90deg, var(--red-600), var(--red-500));
            color: white;
            padding: .75rem 1.1rem;
            border-radius: 10px;
            font-weight: 700;
            box-shadow: 0 8px 28px rgba(225, 29, 72, 0.18);
            display: inline-flex;
            align-items: center;
            gap: .6rem
        }

        .hero-cta svg {
            filter: drop-shadow(0 6px 12px rgba(225, 29, 72, 0.18))
        }

        .muted {
            color: var(--muted)
        }

        /* Find Donors card enhancements */
        .search-card {
            position: relative;
            overflow: hidden;
        }

        .search-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: -60%;
            height: 3px;
            width: 120%;
            background: linear-gradient(90deg, transparent, rgba(239, 68, 68, .55), transparent);
            animation: sweep 3.5s linear infinite;
        }

        @keyframes sweep {
            0% {
                left: -60%;
            }

            100% {
                left: 100%;
            }
        }

        .btn-breathe {
            transition: transform .2s ease, box-shadow .3s ease;
            box-shadow: 0 6px 22px rgba(225, 29, 72, 0.22);
        }

        .btn-breathe:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(225, 29, 72, 0.28);
        }

        /* Recent Donation card + info list */
        .recent-card {
            position: relative;
        }

        .recent-card::after {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            border-radius: 14px;
            box-shadow: inset 0 0 0 1px rgba(225, 29, 72, .08);
        }

        .info-list li {
            display: flex;
            align-items: center;
            gap: .5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        @media (min-width:640px) {
            .info-list li {
                /* keep centered alignment on larger screens as well */
                justify-content: center;
            }
        }

        /* On small screens, show long Location value on its own line */
        @media (max-width: 640px) {
            .info-list li.location .value {
                flex-basis: 100%;
                text-align: center;
                margin-top: 2px;
            }

            .recent-card,
            .recent-card p,
            .recent-card li,
            .recent-card .info-list li span {
                text-align: center;
            }

            .recent-card .info-list li {
                flex-direction: row;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                flex-wrap: wrap;
            }

            .donor-card .info-stack {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                margin-top: 0.75rem;
            }

            .donor-card .info-row {
                display: flex;
                gap: 0.6rem;
                align-items: flex-start;
            }

            .donor-card .info-row .icon {
                color: #ef4444;
                font-size: 0.95rem;
                line-height: 1;
                padding-top: 2px;
            }

            .donor-card .info-row .icon.icon-placeholder {
                width: 0.95rem;
                height: 0.95rem;
                display: inline-block;
            }

            .donor-card .info-row .info-text {
                font-size: 0.82rem;
                color: #4b5563;
                line-height: 1.25;
            }

            .donor-card .info-row .info-text .label {
                display: block;
                font-weight: 600;
                color: #1f2937;
            }

            .donor-card .info-row .info-text .value {
                display: block;
                margin-top: 2px;
            }

            .donor-card .info-row .info-text .value a {
                color: inherit;
                text-decoration: none;
            }
        }

        .info-list i {
            color: #e11d48;
            opacity: .9;
        }

        /* Donor search result card */
        .donor-card {
            position: relative;
            overflow: hidden;
        }

        .donor-card::before {
            content: "";
            position: absolute;
            inset: 0 auto 0 0;
            width: 5px;
            background: linear-gradient(180deg, #ef4444, #dc2626);
            border-top-left-radius: 10px;
            border-bottom-left-radius: 10px;
            box-shadow: 0 0 0 1px rgba(225, 29, 72, .06) inset;
        }

        .donor-card:hover {
            transform: translateY(-3px);
        }

        .donor-card .info-stack {
            margin-top: 0.5rem;
        }

        .donor-card .info-row {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .donor-card .info-row .icon {
            color: #ef4444;
            font-size: 0.85rem;
            line-height: 1;
        }

        .donor-card .info-row .info-text {
            display: flex;
            gap: 0.3rem;
            align-items: baseline;
            font-size: 0.78rem;
            color: #4b5563;
        }

        .donor-card .info-row .info-text .label {
            font-weight: 700;
            color: #1f2937;
        }

        .donor-card .info-row .info-text .value {
            display: inline;
        }

        /* Input prefix icons */
        .field-icon-left {
            position: relative;
        }

        .field-icon-left .fi {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            pointer-events: none;
        }

        .field-icon-left input,
        .field-icon-left select,
        .field-icon-left textarea {
            padding-left: 2.5rem !important;
        }

        /* Adjust floating labels inside icon fields */
        .field-icon-left label.absolute {
            left: 2.5rem !important;
        }

        /* Admin theme (scoped to #admin-panel) */
        #admin-panel {
            --admin: #6366f1;
            --admin-hover: #4f46e5;
            --admin-text: #4338ca;
            --admin-soft: rgba(99, 102, 241, .10);
            --admin-soft-2: rgba(99, 102, 241, .16);
        }

        /* Override common Tailwind reds inside admin to indigo */
        #admin-panel .text-red-700,
        #admin-panel .text-red-600 {
            color: var(--admin-text) !important;
        }

        #admin-panel .bg-red-600 {
            background-color: var(--admin) !important;
        }

        #admin-panel .hover\:bg-red-700:hover {
            background-color: var(--admin-hover) !important;
        }

        #admin-panel .border-red-300 {
            border-color: #c7d2fe !important;
        }

        #admin-panel .focus\:border-red-300:focus {
            border-color: var(--admin) !important;
        }

        #admin-panel input[type="checkbox"].text-red-600 {
            accent-color: var(--admin);
            color: var(--admin) !important;
        }

        /* Floating label focus color inside admin */
        #admin-panel .peer:focus~label,
        #admin-panel .peer:valid~label {
            color: var(--admin) !important;
        }

        /* Admin tabs */
        .admin-tabs {
            display: flex;
            gap: .5rem;
            background: #fff;
            padding: .5rem;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(15, 23, 42, .08);
        }

        .admin-tab {
            display: inline-flex;
            align-items: center;
            gap: .5rem;
            padding: .5rem .75rem;
            border-radius: 10px;
            color: var(--admin);
            background: var(--admin-soft);
            font-weight: 600;
            cursor: pointer;
            transition: background .2s ease, transform .15s ease;
        }

        .admin-tab:hover {
            background: var(--admin-soft-2);
            transform: translateY(-1px);
        }

        .admin-tab.active {
            background: linear-gradient(90deg, var(--admin), var(--admin-hover));
            color: #fff;
            box-shadow: 0 10px 24px rgba(99, 102, 241, .22);
        }

        .admin-tabpanel {
            margin-top: 1rem;
        }

        /* Login modal UI tweaks */
        #login-modal .modal-panel {
            border-radius: 14px;
            box-shadow: 0 20px 60px rgba(15, 23, 42, .16);
        }

        #login-modal .modal-title {
            display: flex;
            align-items: center;
            gap: .6rem;
        }

        .field-icon-right {
            position: relative;
        }

        .field-icon-right .fr {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            cursor: pointer;
        }

        .field-icon-right input {
            padding-right: 2.5rem !important;
        }

        /* Center and color icons nicely inside login modal fields */
        #login-modal .field-icon-left {
            position: relative;
        }

        #login-modal .field-icon-left .fi {
            top: 50% !important;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        #login-modal .field-icon-left:focus-within .fi {
            color: var(--red-600);
        }

        #login-modal .field-icon-right:focus-within .fr {
            color: var(--red-600);
        }

        /* Admin-only navbar theme */
        body.admin-mode header {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.95), rgba(79, 70, 229, 0.95)) !important;
            color: #fff;
        }

        body.admin-mode header a,
        body.admin-mode header button {
            color: #fff !important;
        }

        body.admin-mode header .text-red-700 {
            color: #fff !important;
        }

        body.admin-mode header .hover\:bg-red-50:hover {
            background-color: rgba(255, 255, 255, 0.10) !important;
        }

        body.admin-mode header .bg-red-600 {
            background-color: #6366f1 !important;
        }

        body.admin-mode header .hover\:bg-red-700:hover {
            background-color: #4f46e5 !important;
        }

        body.admin-mode #mobile-menu {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.95), rgba(79, 70, 229, 0.95)) !important;
        }

        /* Admin-mode: restyle the hamburger (3-line) button */
        body.admin-mode #menu-toggle {
            background-color: #ffe4e6 !important;
            color: #3b82f6 !important;
            border-radius: 12px;
            box-shadow: 0 10px 24px rgba(79, 70, 229, .25), inset 0 0 0 2px rgba(79, 70, 229, .25);
            transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease;
        }

        body.admin-mode #menu-toggle:hover {
            background-color: #fecdd3 !important;
            transform: translateY(-1px);
            box-shadow: 0 12px 28px rgba(79, 70, 229, .30), inset 0 0 0 2px rgba(79, 70, 229, .25);
        }

        body.admin-mode #mobile-menu a,
        body.admin-mode #mobile-login-btn {
            color: #fff !important;
        }

        body.admin-mode #mobile-menu a:hover {
            background-color: rgba(255, 255, 255, 0.10) !important;
        }

        body.admin-mode #nav-about-link,
        body.admin-mode #mobile-about-link,
        body.admin-mode #nav-join-link,
        body.admin-mode #mobile-join-link,
        body.admin-mode #nav-search-link,
        body.admin-mode #mobile-search-link,
        body.admin-mode #nav-events-link,
        body.admin-mode #mobile-events-link {
            display: none !important;
        }

        /* Hide About/Join/Contact sections for admin view */
        body.admin-mode section#about {
            display: none !important;
        }

        body.admin-mode section#hero {
            display: none !important;
        }

        body.admin-mode section#how {
            display: none !important;
        }

        body.admin-mode section#recent-donor {
            display: none !important;
        }

        body.admin-mode section#events {
            display: none !important;
        }

        body.admin-mode section#join {
            display: none !important;
        }

        body.admin-mode section#contact {
            display: none !important;
        }

        @media (max-width:768px) {
            .stats-panel {
                flex-direction: column;
                align-items: stretch
            }

            .stats-grid {
                justify-content: space-between
            }
        }

        :root {
            --header-height: 0px;
        }

        /* Sticky footer layout (footer at page end, not fixed) */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex: 1 0 auto;
            padding-top: var(--header-height);
        }

        /* Ensure in-page anchors are not hidden behind the fixed header */
        section {
            scroll-margin-top: calc(var(--header-height) + 8px);
        }

        footer {
            flex-shrink: 0;
        }

        /* Responsive footer: safe-area padding + scalable sizes */
        footer {
            padding-bottom: max(1rem, env(safe-area-inset-bottom));
        }

        @supports not (padding-bottom: max(1rem, 1rem)) {
            footer {
                padding-bottom: 1rem;
            }
        }

        footer .footer-text {
            font-size: clamp(0.75rem, 1.6vw, 0.9rem);
        }

        footer .socials {
            gap: clamp(0.5rem, 2vw, 0.9rem);
        }

        footer .social-link {
            width: clamp(2.25rem, 4.8vw, 2.75rem);
            height: clamp(2.25rem, 4.8vw, 2.75rem);
        }

        footer .social-link i {
            font-size: clamp(0.9rem, 2.6vw, 1.1rem);
        }

        /* Float-In animation for scroll reveal */
        .float-in {
            opacity: 0;
            transform: translateY(24px) scale(0.98);
            will-change: transform, opacity;
            transition: opacity 240ms ease, transform 240ms ease;
            /* smooth exit */
        }

        .float-in.is-visible {
            animation: float-in 2400ms cubic-bezier(.16, 1, .3, 1) forwards;
            animation-delay: var(--delay, 0ms);
        }

        /* Instantly visible state (no animation), used on scroll up */
        .float-in.instant-visible {
            opacity: 1 !important;
            transform: translateY(0) scale(1.0) !important;
            animation: none !important;
            transition: none !important;
        }

        .float-in.is-out-up {
            animation: float-out-up 800ms cubic-bezier(.22, .61, .36, 1) forwards;
        }

        .float-in.is-out-down {
            animation: float-out-down 800ms cubic-bezier(.22, .61, .36, 1) forwards;
        }

        @keyframes float-in {
            0% {
                opacity: 0;
                transform: translateY(28px) scale(0.985);
            }

            60% {
                opacity: 1;
                transform: translateY(-2px) scale(1.0);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1.0);
            }
        }

        @keyframes float-out-up {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1.0);
            }

            100% {
                opacity: 0;
                transform: translateY(-20px) scale(0.985);
            }
        }

        @keyframes float-out-down {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1.0);
            }

            100% {
                opacity: 0;
                transform: translateY(20px) scale(0.985);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .float-in {
                opacity: 1 !important;
                transform: none !important;
                animation: none !important;
            }
        }

        /* (Removed previous rule that hid Contact on mobile) */
        
        /* --- Mobile card responsiveness (global) --- */
        @media (max-width: 768px) {
            /* Slightly reduce icon sizes on tablets/phones */
            .how-card .icon-circle {
                width: 48px;
                height: 48px;
            }

            .icon-circle-sm {
                width: 36px;
                height: 36px;
            }
        }

        @media (max-width: 640px) {

            /* Ensure all card types take full width and have comfortable spacing */
            .card,
            .how-card,
            .search-card,
            .recent-card,
            .donor-card {
                width: 100%;
                margin-inline: 0;
                margin-bottom: 0.75rem;
                padding: clamp(0.75rem, 2.8vw, 1rem);
                border-radius: 12px;
                overflow-wrap: anywhere;
                word-break: break-word;
            }

            /* Images inside cards scale to container width */
            .card img,
            .recent-card img,
            .donor-card img {
                max-width: 100%;
                height: auto;
                border-radius: 10px;
            }

            /* Avatar/media size within compact cards */
            .donor-card .avatar,
            .recent-card .avatar {
                width: clamp(52px, 16vw, 72px);
                height: clamp(52px, 16vw, 72px);
                object-fit: cover;
                border-radius: 10px;
            }

            /* Headings scale down a bit on phones */
            .card .title,
            .how-card .title,
            .search-card .title,
            .recent-card .title,
            .donor-card .title,
            .card h3,
            .how-card h3,
            .search-card h3,
            .recent-card h3,
            .donor-card h3 {
                font-size: clamp(1rem, 4.2vw, 1.15rem);
                line-height: 1.25;
            }

            .card .subtitle,
            .muted {
                font-size: clamp(0.85rem, 3.6vw, 0.95rem);
            }

            /* Common flex content in cards stacks vertically on phones */
            .card .flex,
            .donor-card .flex,
            .recent-card .flex {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .donor-card .meta,
            .recent-card .meta,
            .card .meta {
                display: flex;
                flex-wrap: wrap;
                gap: 0.35rem 0.5rem;
            }

            .card .btn-group,
            .donor-card .btn-group,
            .recent-card .btn-group {
                width: 100%;
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
            }

            .card .btn-group>*,
            .donor-card .btn-group>*,
            .recent-card .btn-group>* {
                flex: 1 1 auto;
                min-width: 140px;
            }

            .card .btn,
            .donor-card .btn,
            .search-card .btn,
            .recent-card .btn {
                width: 100%;
            }

            .info-list {
                justify-content: flex-start;
                gap: 0.25rem 0.75rem;
            }

            .info-list li {
                justify-content: flex-start;
            }

            .info-list .value {
                display: block;
                max-width: 100%;
            }

            .recent-card .info-list,
            .recent-card .info-list li {
                justify-content: center;
            }

            .recent-card .info-list .value {
                display: inline;
            }

            .recent-card .info-list li.location .value {
                flex-basis: auto;
                margin-top: 0;
            }

            .stats-panel {
                flex-direction: column;
                gap: 0.75rem;
                align-items: stretch;
            }

            .stats-grid {
                flex-wrap: wrap;
                gap: 0.75rem;
                justify-content: space-between;
            }

            .stat-card {
                min-width: 0;
                flex: 1 1 calc(50% - 0.75rem);
                padding: 0.5rem 0.75rem;
            }

            .stat-card .num {
                font-size: clamp(1.4rem, 8vw, 1.8rem);
            }

            [class*="grid-cols-4"],
            [class*="grid-cols-3"],
            [class*="grid-cols-2"] {
                grid-template-columns: 1fr !important;
            }
        }

        @media (max-width: 360px) {
            .stat-card {
                flex: 1 1 100%;
            }
        }
    </style>
    <meta name="description"
        content="Community-driven blood donation platform. Register as a donor, search donors by blood group and location.">
</head>

<body class="bg-gray-50 text-gray-900">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        (function() {
            const vp = document.querySelector('meta[name="viewport"]');
            if (!vp) return;
            const apply = () => {
                const isMobile = (navigator.userAgentData && navigator.userAgentData.mobile) || /Mobi|Android/i.test(navigator.userAgent);
                const narrow = Math.min(window.innerWidth, window.innerHeight) <= 420;
                const scale = (isMobile && narrow) ? 0.75 : 1;
                const current = vp.getAttribute('content') || '';
                const next = `width=device-width, initial-scale=${scale}`;
                if (current !== next) vp.setAttribute('content', next);
            };
            window.addEventListener('load', apply, {
                once: true
            });
            window.addEventListener('resize', apply);
            window.addEventListener('orientationchange', apply);
        })();
    </script>

    <script type="module">
        const __pendingCounts__ = new Map();
        window.__statsVisible__ = false;
        window.__animateCountTo__ = undefined;

        function setCountTarget(id, value) {
            const v = Number(value || 0);
            const el = document.getElementById(id);
            if (!el) {
                __pendingCounts__.set(id, v);
                return;
            }
            el.dataset.countTo = String(v);
            if (window.__statsVisible__ && typeof window.__animateCountTo__ === 'function') {
                window.__animateCountTo__(el, v);
            }
        }

        function setHeaderOffset() {
            const header = document.querySelector('header');
            const h = header ? header.offsetHeight : 0;
            document.documentElement.style.setProperty('--header-height', h + 'px');
        }
        window.addEventListener('load', setHeaderOffset, {
            once: true
        });
        window.addEventListener('resize', setHeaderOffset);
        if ('ResizeObserver' in window) {
            const ro = new ResizeObserver(() => setHeaderOffset());
            ro.observe(document.body);
        }
        import {
            initializeApp
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import {
            getAnalytics,
            isSupported as analyticsIsSupported
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
        import {
            getAuth,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            sendPasswordResetEmail,
            deleteUser
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import {
            getDatabase,
            ref,
            push,
            set,
            onValue,
            remove,
            update,
            query,
            limitToLast
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBAxWT9HU2C6OAhre_nUyG8OmOq9yPocVw",
            authDomain: "blood-donation-community-a1eb2.firebaseapp.com",
            databaseURL: "https://blood-donation-community-a1eb2-default-rtdb.firebaseio.com",
            projectId: "blood-donation-community-a1eb2",
            storageBucket: "blood-donation-community-a1eb2.appspot.com",
            messagingSenderId: "668392010451",
            appId: "1:668392010451:web:70e2d1c5e17a37a75dda26",
            measurementId: "G-4GPWV4MG5Q"
        };

        const app = initializeApp(firebaseConfig);
        let analytics;
        try {
            analyticsIsSupported().then((supported) => {
                if (supported) {
                    analytics = getAnalytics(app);
                }
            });
        } catch (e) {
            console.warn('Analytics not supported in this environment.');
        }
        const auth = getAuth(app);
        const database = getDatabase(app);

        let donorsList = [];
        let eventsList = [];
        let currentUser = null;
        let currentUserRole = 'member';
        const ADMIN_EMAIL = 'mueidshahriar_cse1616@std.bauet.ac.bd';

        function openModal(modal) {
            if (!modal) return;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal(modal) {
            if (!modal) return;
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function showModalMessage(modal, message, title) {
            let modalEl = null;
            if (typeof modal === 'string') modalEl = document.getElementById(modal);
            else modalEl = modal || document.getElementById('success-modal');
            if (!modalEl) return console.warn('Modal element not found for showModalMessage');
            const titleEl = modalEl.querySelector('h3');
            const messageEl = modalEl.querySelector('p');
            if (titleEl && title) titleEl.textContent = title;
            if (messageEl) messageEl.textContent = message || '';
            openModal(modalEl);
        }

        function attachConfirmHandler(callback, opts = {}) {
            const modal = document.getElementById('delete-confirm-modal');
            if (!modal) return console.warn('Delete confirm modal not found');
            const titleEl = modal.querySelector('h3');
            const messageEl = modal.querySelector('p');
            if (opts.title && titleEl) titleEl.textContent = opts.title;
            if (opts.message && messageEl) messageEl.textContent = opts.message;

            const confirmBtn = document.getElementById('delete-confirm');
            if (!confirmBtn) {
                openModal(modal);
                return;
            }

            const newBtn = confirmBtn.cloneNode(true);
            confirmBtn.parentNode.replaceChild(newBtn, confirmBtn);

            newBtn.addEventListener('click', () => {
                try {
                    callback();
                } catch (err) {
                    console.error('Error in confirm handler:', err);
                }
            }, {
                once: true
            });

            openModal(modal);
        }

        function getDateParts(dateStr) {
            if (!dateStr || typeof dateStr !== 'string') return {
                y: '',
                m: '',
                d: ''
            };
            const parts = dateStr.split('-');
            return {
                y: parts[0] || '',
                m: parts[1] || '',
                d: parts[2] || ''
            };
        }

        function renderDonorCardPublic(d) {
            const lastDate = d.lastDonateDate ? new Date(d.lastDonateDate).toLocaleDateString() : '-';
            const contactDesktop = d.isPhoneHidden
                ? `<div class="flex items-center gap-1">
                        <i class="fa-solid fa-circle-info text-red-500"></i>
                        <span class="text-xs text-red-700 font-semibold no-underline">${d.publicComment || 'Contact Admin'}</span>
                   </div>`
                : `<div class="flex items-center gap-1">
                        <i class="fa-solid fa-phone text-red-500"></i>
                        <span class="font-bold">Contact:</span>
                        <a class="text-xs text-gray-600 underline" href="tel:${d.phone}">${d.phone}</a>
                   </div>`;

            const contactMobileRow = d.isPhoneHidden
                ? `<div class="info-row sm:hidden">
                        <i class="icon fa-solid fa-circle-info text-red-500"></i>
                        <div class="info-text">
                            <span class="value text-red-700 font-semibold">${d.publicComment || 'Contact Admin'}</span>
                        </div>
                   </div>`
                : `<div class="info-row sm:hidden">
                        <i class="icon fa-solid fa-phone text-red-500"></i>
                        <div class="info-text">
                            <a class="value font-semibold tracking-wide text-gray-700" href="tel:${d.phone}">${d.phone}</a>
                        </div>
                   </div>`;

            return `
                <div class="donor-card float-in bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 flex flex-col sm:flex-row sm:items-center justify-between">
                    <div class="flex-1 min-w-0 mb-2 sm:mb-0">
                        <div class="font-bold text-red-700 truncate">${d.fullName}</div>
                        <div class="info-stack sm:hidden">
                            <div class="info-row">
                                <i class="icon fa-solid fa-droplet text-red-500"></i>
                                <div class="info-text">
                                    <span class="label">Blood Group:</span>
                                    <span class="value">${d.bloodGroup}</span>
                                </div>
                            </div>
                            <div class="info-row sm:hidden">
                                <i class="icon fa-solid fa-calendar-day text-red-500"></i>
                                <div class="info-text">
                                    <span class="label">Last Donated:</span>
                                    <span class="value">${lastDate}</span>
                                </div>
                            </div>
                            <div class="info-row">
                                <i class="icon fa-solid fa-location-dot text-red-500"></i>
                                <div class="info-text">
                                    <span class="label">Current Location:</span>
                                    <span class="value">${d.location || '—'}</span>
                                </div>
                            </div>
                            ${contactMobileRow}
                        </div>
                        <div class="hidden sm:flex sm:flex-col text-xs text-gray-600 gap-1 mt-1">
                            <div class="flex items-center gap-1">
                                <i class="fa-solid fa-droplet text-red-500"></i>
                                <span class="font-bold">Blood Group:</span>
                                <span>${d.bloodGroup}</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <i class="fa-solid fa-location-dot text-red-500"></i>
                                <span class="font-bold">Current Location:</span>
                                <span>${d.location || '—'}</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex-shrink-0 hidden sm:flex flex-col items-start md:items-end justify-end text-xs text-gray-500 mt-2 sm:mt-0 whitespace-nowrap">
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-calendar-day text-red-500"></i>
                            <span class="font-bold">Last Donated:</span>
                            <span>${lastDate}</span>
                        </div>
                        ${contactDesktop}
                    </div>
                </div>
            `;
        }

        function renderDonorCardAdmin(d) {
            const lastDate = d.lastDonateDate ? new Date(d.lastDonateDate).toLocaleDateString() : '-';
            const phone = d.phone || '-';
            return `
                <div class="bg-white p-4 rounded-lg shadow-sm flex flex-col sm:flex-row sm:items-center justify-between border-l-4 border-red-600">
                    <div class="flex-1 min-w-0 mb-2 sm:mb-0">
                        <div class="font-bold text-red-700 truncate">${d.fullName}</div>
                        <div class="text-xs text-gray-600 mt-1"><span class="font-bold">ID:</span> <span>${d.id}</span></div>
                        <div class="text-xs text-gray-600"><span class="font-bold">Email:</span> <span>${d.email}</span></div>
                        <div class="text-xs text-gray-600"><span class="font-bold">Blood Group:</span> <span>${d.bloodGroup}</span></div>
                        <div class="text-xs text-gray-600"><span class="font-bold">Location:</span> <span>${d.location || '-'}</span></div>
                        <div class="text-xs text-gray-600"><span class="font-bold">Phone:</span> <span>${phone}</span></div>
                        <div class="text-xs text-gray-600"><span class="font-bold">Last Donated:</span> <span>${lastDate}</span></div>
                    </div>
                    <div class="flex-shrink-0 mt-4 sm:mt-0 flex gap-2">
                        <button data-member-id="${d.id}" class="edit-member-btn px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Edit</button>
                        <button data-member-id="${d.id}" class="delete-member-btn px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700">Delete</button>
                    </div>
                </div>
            `;
        }

        function renderSearchResults(filteredDonors) {
            const searchResults = document.getElementById('search-results');
            if (!searchResults) return;
            if (filteredDonors.length === 0) {
                searchResults.innerHTML = '<div class="text-gray-500 italic">No donors found.</div>';
            } else {
                const header = `<div class="text-sm text-gray-600 mb-2">Found <span class="font-bold text-red-700">${filteredDonors.length}</span> donor(s)</div>`;
                searchResults.innerHTML = header + filteredDonors.map(renderDonorCardPublic).join('');
                if (window.registerFloatEls) window.registerFloatEls(searchResults);
            }
        }

        function renderAdminMembersList() {
            const membersListDiv = document.getElementById('admin-members-list');
            if (!membersListDiv) return;
            membersListDiv.innerHTML = donorsList.map(renderDonorCardAdmin).join('');

            membersListDiv.querySelectorAll('.edit-member-btn').forEach(button => {
                button.addEventListener('click', (ev) => {
                    const memberId = ev.target.dataset.memberId;
                    const memberData = donorsList.find(d => d.id === memberId);
                    if (memberData) {
                        document.getElementById('admin-member-id').value = memberData.id;
                        document.getElementById('admin-member-fullname').value = memberData.fullName || '';
                        document.getElementById('admin-member-phone').value = memberData.phone || '';
                        document.getElementById('admin-member-bloodGroup').value = memberData.bloodGroup || '';
                        document.getElementById('admin-member-location').value = memberData.location || '';
                        document.getElementById('admin-member-lastDonateDate').value = memberData.lastDonateDate || '';
                        document.getElementById('admin-member-hide-phone').checked = memberData.isPhoneHidden || false;
                        document.getElementById('admin-member-comment').value = memberData.publicComment || '';
                        document.getElementById('admin-member-form').scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });

            membersListDiv.querySelectorAll('.delete-member-btn').forEach(button => {
                button.addEventListener('click', (ev) => {
                    const memberId = ev.target.dataset.memberId;
                    const memberData = donorsList.find(d => d.id === memberId);
                    if (memberId && memberData) {
                        deleteMember(memberId);
                    }
                });
            });
        }

        function renderAdminEventsList() {
            const eventsListDiv = document.getElementById('admin-events-list');
            if (!eventsListDiv) return;
            eventsListDiv.innerHTML = eventsList.map(e => `
                <div class="bg-white p-4 rounded-lg shadow-sm flex items-center justify-between">
                    <div class="flex-1 min-w-0">
                        <div class="font-bold text-red-700 truncate">${e.title}</div>
                        <div class="text-sm text-gray-600">${e.date} at ${e.time}</div>
                    </div>
                    <div class="flex-shrink-0 flex gap-2">
                        <button data-event-id="${e.id}" class="edit-event-btn px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Edit</button>
                        <button data-event-id="${e.id}" class="delete-event-btn px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700">Delete</button>
                    </div>
                </div>
            `).join('');

            eventsListDiv.querySelectorAll('.edit-event-btn').forEach(button => {
                button.addEventListener('click', (ev) => {
                    const eventId = ev.target.dataset.eventId;
                    const eventData = eventsList.find(e => e.id === eventId);
                    if (eventData) {
                        document.getElementById('admin-event-id').value = eventData.id;
                        document.getElementById('event-title').value = eventData.title;
                        document.getElementById('event-date').value = eventData.date;
                        document.getElementById('event-time').value = eventData.time;
                        document.getElementById('event-location').value = eventData.location;
                        document.getElementById('event-description').value = eventData.description;
                    }
                });
            });
            eventsListDiv.querySelectorAll('.delete-event-btn').forEach(button => {
                button.addEventListener('click', (ev) => {
                    const eventId = ev.target.dataset.eventId;
                    if (eventId) {
                        deleteEvent(eventId);
                    }
                });
            });
        }

        function clearAdminEventForm() {
            document.getElementById('admin-event-form').reset();
            document.getElementById('admin-event-id').value = '';
        }

        function clearAdminMemberForm() {
            document.getElementById('admin-member-form').reset();
            document.getElementById('admin-member-id').value = '';
        }

        function renderRecentDonorsCarousel(donors) {
            const carouselInner = document.querySelector('#recentDonorCarousel .carousel-inner');
            const carouselIndicators = document.querySelector('#recentDonorCarousel .carousel-indicators');
            if (!carouselInner || !carouselIndicators) return;
            carouselInner.innerHTML = '';
            carouselIndicators.innerHTML = '';
            if (donors.length === 0) {
                carouselInner.innerHTML = '<div class="text-center p-5">No recent donations to show.</div>';
                return;
            }
            donors.forEach((d, index) => {
                const date = d.date ? new Date(d.date).toLocaleDateString() : '—';
                const itemClass = index === 0 ? 'carousel-item active' : 'carousel-item';
                const carouselItemHTML = `
                    <div class="${itemClass}">
                        <div class="recent-card relative bg-white p-6 rounded-xl shadow-lg mx-auto max-w-2xl text-center overflow-hidden">
                            <div class="absolute top-0 left-0 h-full w-2 bg-red-600 rounded-l-xl"></div>
                            <div class="absolute top-0 right-0 h-full w-2 bg-red-600 rounded-r-xl"></div>
                            <h3 class="text-xl font-bold text-red-700 text-center">Recent Donation</h3>
                            <p class="mt-3 text-gray-700 text-center">A huge thank you to our recent donor, <span class="font-bold text-red-600">${d.name}</span>, who donated blood on <span class="font-semibold">${date}</span>.</p>
                            <ul class="mt-4 list-none p-0 space-y-2 text-gray-700 info-list text-center">
                                <li><i class="fa-solid fa-droplet"></i><span class="font-bold">Blood Group:</span> <span>${d.bloodGroup}</span></li>
                                <li class="location"><i class="fa-solid fa-location-dot"></i><span class="font-bold">Location:</span> <span class="value">${d.location}</span></li>
                                <li><i class="fa-solid fa-building-columns"></i><span class="font-bold">Department:</span> <span>${d.department || '-'}</span></li>
                                <li><i class="fa-solid fa-layer-group"></i><span class="font-bold">Batch:</span> <span>${d.batch || '-'}</span></li>
                                <li><i class="fa-solid fa-user"></i><span class="font-bold">Age:</span> <span>${d.age || '-'}</span></li>
                                <li><i class="fa-solid fa-weight-scale"></i><span class="font-bold">Weight:</span> <span>${d.weight ? d.weight + ' kg' : '-'}</span></li>
                            </ul>
                        </div>
                    </div>
                `;
                carouselInner.innerHTML += carouselItemHTML;
                const indicatorClass = index === 0 ? 'active' : '';
                const indicatorHTML = `<li data-target="#recentDonorCarousel" data-slide-to="${index}" class="${indicatorClass}"></li>`;
                carouselIndicators.innerHTML += indicatorHTML;
            });
        }

        const donorsRef = ref(database, 'donors');
        onValue(donorsRef, (snapshot) => {
            const data = snapshot.val();
            donorsList = [];
            if (data && typeof data === 'object') {
                for (let key in data) {
                    if (Object.prototype.hasOwnProperty.call(data, key)) {
                        donorsList.push({
                            id: key,
                            ...data[key]
                        });
                    }
                }
            }
            const searchForm = document.getElementById('search-form');
            if (searchForm) {
                const blood = document.getElementById('search-blood')?.value;
                const eligibleOnly = document.getElementById('eligible-only')?.checked;
                const resultsEl = document.getElementById('search-results');
                if (blood === 'select') {
                    if (resultsEl) resultsEl.innerHTML = '';
                } else {
                    let filtered = donorsList;
                    if (blood && blood !== 'all' && blood !== 'select') {
                        filtered = filtered.filter(d => d.bloodGroup === blood);
                    }
                    if (eligibleOnly) {
                        const isEligible = (lastDonationDate) => {
                            if (!lastDonationDate) return true;
                            const today = new Date();
                            const lastDonation = new Date(lastDonationDate);
                            const threeMonthsAgo = new Date(new Date().setMonth(today.getMonth() - 3));
                            return lastDonation <= threeMonthsAgo;
                        };
                        filtered = filtered.filter(d => isEligible(d.lastDonateDate));
                    }
                    renderSearchResults(filtered);
                }
            }
            if (currentUserRole === 'admin') {
                renderAdminMembersList();
            }
            setCountTarget('donor-count', donorsList.length);
        }, (error) => {
            console.error("Failed to load donors: ", error);
        });

        const eventsRef = ref(database, 'events');
        onValue(eventsRef, (snapshot) => {
            const data = snapshot.val();
            eventsList = [];
            if (data && typeof data === 'object') {
                for (let key in data) {
                    if (Object.prototype.hasOwnProperty.call(data, key)) {
                        eventsList.push({
                            id: key,
                            ...data[key]
                        });
                    }
                }
            }
            const publicEventsList = document.getElementById('public-events-list');
            if (publicEventsList) {
                publicEventsList.innerHTML = eventsList.map((e, idx) => {
                    const parts = getDateParts(e.date);
                    const accents = [
                        {
                            card: 'accent-rose tint-rose',
                            month: 'text-red-700',
                            btn: 'bg-red-600 hover:bg-red-700'
                        },
                        {
                            card: 'accent-amber tint-amber',
                            month: 'text-amber-600',
                            btn: 'bg-amber-500 hover:bg-amber-600'
                        },
                        {
                            card: 'accent-emerald tint-emerald',
                            month: 'text-emerald-600',
                            btn: 'bg-emerald-600 hover:bg-emerald-700'
                        },
                        {
                            card: 'accent-indigo tint-indigo',
                            month: 'text-indigo-600',
                            btn: 'bg-indigo-600 hover:bg-indigo-700'
                        },
                        {
                            card: 'accent-sky tint-sky',
                            month: 'text-sky-600',
                            btn: 'bg-sky-600 hover:bg-sky-700'
                        },
                    ];
                    const a = accents[idx % accents.length];
                    return `
                        <article class="how-card ${a.card} bg-white rounded-xl shadow-lg p-4 transform transition hover:scale-105 float-in flex gap-4 items-center flex-col sm:flex-row text-center sm:text-left">
                            <div class="flex-shrink-0 w-full sm:w-20">
                                <div class="text-sm font-bold ${a.month}">${parts.m}</div>
                                <div class="text-2xl font-extrabold">${parts.d}</div>
                                <div class="text-xs text-gray-500">${parts.y}</div>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold">${e.title || ''}</h3>
                                <p class="text-sm text-gray-600">${e.location || ''} • ${e.time || ''}</p>
                                <p class="mt-2 text-gray-700">${e.description || ''}</p>
                                <div class="mt-3 flex gap-2 justify-center sm:justify-start">
                                    <a href="#" class="px-4 py-2 ${a.btn} text-white rounded-md inline-flex items-center gap-2">
                                        <i class="fa-solid fa-calendar-check"></i>
                                        <span>Register</span>
                                    </a>
                                </div>
                            </div>
                        </article>
                        `;
                }).join('');
                if (window.registerFloatEls) window.registerFloatEls(publicEventsList);
            }
            if (currentUserRole === 'admin') {
                renderAdminEventsList();
            }
            setCountTarget('event-count', eventsList.length);
        }, (error) => {
            console.error("Failed to load events: ", error);
        });

        const statsRef = ref(database, 'stats');
        onValue(statsRef, (snapshot) => {
            const statsData = snapshot.val();
            if (statsData && statsData.livesHelped != null) {
                setCountTarget('lives-helped-count', statsData.livesHelped);
            }
        }, (error) => {
            console.error("Failed to load stats: ", error);
        });

        const recentDonationsRef = ref(database, 'recentDonations');
        const recentDonationsQuery = query(recentDonationsRef, limitToLast(3));
        onValue(recentDonationsQuery, (snapshot) => {
            const data = snapshot.val();
            const recentDonors = [];
            if (data) {
                for (const key in data) {
                    if (data.hasOwnProperty(key)) {
                        recentDonors.push({
                            id: key,
                            ...data[key]
                        });
                    }
                }
            }
            renderRecentDonorsCarousel(recentDonors.reverse());
        }, (error) => {
            console.error("Failed to load recent donations: ", error);
        });

        function updateLoginButtonState() {
            const loginBtn = document.getElementById('login-btn');
            const mobileLoginBtn = document.getElementById('mobile-login-btn');
            const profileUserId = document.getElementById('profile-userId');
            const adminPanel = document.getElementById('admin-panel');
            const adminBadge = document.getElementById('admin-badge');
            const adminNavLink = document.getElementById('admin-nav-link');
            const adminMobileLink = document.getElementById('admin-mobile-link');
            const joinLink = document.getElementById('nav-join-link');
            const joinMobileLink = document.getElementById('mobile-join-link');
            const howLink = document.getElementById('nav-how-link');
            const howMobileLink = document.getElementById('mobile-how-link');
            const contactLink = document.getElementById('nav-contact-link');
            const contactMobileLink = document.getElementById('mobile-contact-link');
            if (!loginBtn || !mobileLoginBtn || !adminPanel) return;
            if (currentUser) {
                loginBtn.innerHTML = '<i class="fa-solid fa-user" aria-hidden="true"></i><span class="sr-only">Profile</span>';
                loginBtn.setAttribute('aria-label', 'Profile');
                loginBtn.setAttribute('title', 'Profile');
                loginBtn.dataset.state = 'loggedin';
                mobileLoginBtn.innerHTML = '<i class="fa-solid fa-user" aria-hidden="true"></i><span class="sr-only">Profile</span>';
                mobileLoginBtn.setAttribute('aria-label', 'Profile');
                mobileLoginBtn.setAttribute('title', 'Profile');
                if (profileUserId) profileUserId.textContent = `User ID: ${currentUser.uid}`;
                const userRef = ref(database, `donors/${currentUser.uid}/role`);
                onValue(userRef, (snapshot) => {
                    currentUserRole = snapshot.val() || 'member';
                    if (currentUserRole === 'admin') {
                        adminPanel.classList.remove('hidden');
                        document.body.classList.add('admin-mode');
                        if (adminBadge) {
                            adminBadge.classList.remove('hidden');
                            adminBadge.classList.add('inline-flex');
                        }
                        adminNavLink && adminNavLink.classList.remove('hidden');
                        adminMobileLink && adminMobileLink.classList.remove('hidden');
                        joinLink && joinLink.classList.add('hidden');
                        joinMobileLink && joinMobileLink.classList.add('hidden');
                        howLink && howLink.classList.add('hidden');
                        howMobileLink && howMobileLink.classList.add('hidden');
                        contactLink && contactLink.classList.add('hidden');
                        contactMobileLink && contactMobileLink.classList.add('hidden');
                        renderAdminMembersList();
                        renderAdminEventsList();
                    } else {
                        adminPanel.classList.add('hidden');
                        document.body.classList.remove('admin-mode');
                        if (adminBadge) {
                            adminBadge.classList.add('hidden');
                            adminBadge.classList.remove('inline-flex');
                        }
                        adminNavLink && adminNavLink.classList.add('hidden');
                        adminMobileLink && adminMobileLink.classList.add('hidden');
                        joinLink && joinLink.classList.remove('hidden');
                        joinMobileLink && joinMobileLink.classList.remove('hidden');
                        howLink && howLink.classList.remove('hidden');
                        howMobileLink && howMobileLink.classList.remove('hidden');
                        contactLink && contactLink.classList.remove('hidden');
                        contactMobileLink && contactMobileLink.classList.remove('hidden');
                    }
                }, {
                    onlyOnce: true
                });
            } else {
                loginBtn.textContent = 'Login';
                loginBtn.dataset.state = 'loggedout';
                mobileLoginBtn.textContent = 'Login';
                if (profileUserId) profileUserId.textContent = '';
                adminPanel.classList.add('hidden');
                document.body.classList.remove('admin-mode');
                adminBadge && adminBadge.classList.add('hidden');
                adminNavLink && adminNavLink.classList.add('hidden');
                adminMobileLink && adminMobileLink.classList.add('hidden');
                joinLink && joinLink.classList.remove('hidden');
                joinMobileLink && joinMobileLink.classList.remove('hidden');
                howLink && howLink.classList.remove('hidden');
                howMobileLink && howMobileLink.classList.remove('hidden');
                contactLink && contactLink.classList.remove('hidden');
                contactMobileLink && contactMobileLink.classList.remove('hidden');
            }
        }

        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            updateLoginButtonState();
        });

        function saveEvent(eventData) {
            if (!currentUser || currentUserRole !== 'admin') {
                showModalMessage('success-modal', 'You do not have permission to perform this action.', 'Permission Denied');
                return;
            }
            const eventId = eventData.id;
            delete eventData.id;
            if (eventId) {
                update(ref(database, 'events/' + eventId), eventData)
                    .then(() => showModalMessage('success-modal', 'Event updated successfully!', 'Success'))
                    .catch(error => showModalMessage('success-modal', `Failed to update event: ${error.message}`, 'Error'));
            } else {
                const newEventRef = push(eventsRef);
                set(newEventRef, eventData)
                    .then(() => showModalMessage('success-modal', 'New event created successfully!', 'Success'))
                    .catch(error => showModalMessage('success-modal', `Failed to create event: ${error.message}`, 'Error'));
            }
            clearAdminEventForm();
        }

        function deleteEvent(eventId) {
            if (!currentUser || currentUserRole !== 'admin') {
                showModalMessage('success-modal', 'You do not have permission to perform this action.', 'Permission Denied');
                return;
            }
            const modal = document.getElementById('delete-confirm-modal');
            const titleEl = modal.querySelector('h3');
            const messageEl = modal.querySelector('p');
            attachConfirmHandler(() => {
                remove(ref(database, 'events/' + eventId))
                    .then(() => {
                        closeModal(modal);
                        showModalMessage('success-modal', 'Event deleted successfully!', 'Success');
                    })
                    .catch(error => {
                        closeModal(modal);
                        showModalMessage('success-modal', `Failed to delete event: ${error.message}`, 'Error');
                    });
            }, {
                title: 'Delete Event',
                message: 'Deleting this event is permanent and cannot be undone.'
            });
        }

        function deleteMember(memberId) {
            if (!currentUser || currentUserRole !== 'admin') {
                showModalMessage('success-modal', 'You do not have permission to perform this action.', 'Permission Denied');
                return;
            }
            const modal = document.getElementById('delete-confirm-modal');
            const titleEl = modal.querySelector('h3');
            const messageEl = modal.querySelector('p');
            attachConfirmHandler(() => {
                remove(ref(database, 'donors/' + memberId))
                    .then(() => {
                        closeModal(modal);
                        showModalMessage('success-modal', 'Member profile deleted successfully!', 'Success');
                    })
                    .catch(error => {
                        closeModal(modal);
                        showModalMessage('success-modal', `Failed to delete member data: ${error.message}`, 'Error');
                    });
            }, {
                title: 'Delete Member',
                message: 'Deleting this member profile is permanent and cannot be undone.'
            });
        }

        window.onload = function() {
            const successModal = document.getElementById('success-modal');
            const successClose = document.getElementById('success-close');
            successClose?.addEventListener('click', () => closeModal(successModal));
            successModal?.querySelector('.absolute.inset-0')?.addEventListener('click', () => closeModal(successModal));

            const loginModal = document.getElementById('login-modal');
            const loginCancel = document.getElementById('login-cancel');
            loginCancel?.addEventListener('click', () => closeModal(loginModal));
            loginModal?.querySelector('.absolute.inset-0')?.addEventListener('click', () => closeModal(loginModal));

            const profileModal = document.getElementById('profile-modal');
            const pfClose = document.getElementById('pf-close');
            const pfLogout = document.getElementById('pf-logout');
            const pfDelete = document.getElementById('pf-delete');
            const profileForm = document.getElementById('profile-form');
            const deleteConfirmModal = document.getElementById('delete-confirm-modal');
            const deleteCancelBtn = document.getElementById('delete-cancel');
            const deleteConfirmBtn = document.getElementById('delete-confirm');

            deleteCancelBtn?.addEventListener('click', () => closeModal(deleteConfirmModal));
            deleteConfirmModal?.querySelector('.absolute.inset-0')?.addEventListener('click', () => closeModal(deleteConfirmModal));

            pfClose?.addEventListener('click', () => closeModal(profileModal));
            profileModal?.querySelector('.absolute.inset-0')?.addEventListener('click', () => closeModal(profileModal));

            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');

            function setMenuOpen(open) {
                if (!mobileMenu || !menuToggle) return;
                mobileMenu.classList.toggle('hidden', !open);
                menuToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
            }
            menuToggle?.addEventListener('click', (ev) => {
                if (!mobileMenu) return;
                const open = mobileMenu.classList.contains('hidden');
                setMenuOpen(open);
                ev.stopPropagation();
            });

            mobileMenu?.querySelectorAll('a, button').forEach(a => {
                a.addEventListener('click', () => setMenuOpen(false));
            });

            document.addEventListener('click', (e) => {
                if (!mobileMenu || !menuToggle) return;
                const isOpen = !mobileMenu.classList.contains('hidden');
                const clickedInside = mobileMenu.contains(e.target) || menuToggle.contains(e.target);
                if (isOpen && !clickedInside) setMenuOpen(false);
            });

            const joinForm = document.getElementById('join-form');
            const joinClear = document.getElementById('join-clear');

            joinForm?.addEventListener('submit', (e) => {
                e.preventDefault();
                const fd = new FormData(joinForm);
                const email = fd.get('email')?.toString().trim();
                const password = fd.get('password')?.toString();
                const confirm = fd.get('confirmPassword')?.toString();
                const gender = fd.get('gender')?.toString();
                const isPhoneHidden = gender === 'Female';
                const donorData = {
                    fullName: fd.get('fullName')?.toString().trim(),
                    phone: fd.get('phone')?.toString().trim(),
                    bloodGroup: fd.get('bloodGroup')?.toString().trim(),
                    location: fd.get('location')?.toString().trim(),
                    lastDonateDate: fd.get('lastDonateDate')?.toString() || '',
                    role: email === ADMIN_EMAIL ? 'admin' : 'member',
                    gender: gender || 'Other',
                    isPhoneHidden: isPhoneHidden
                };

                if (!donorData.fullName || !email || !donorData.phone || !donorData.bloodGroup || !donorData.location || !password || !confirm) {
                    showModalMessage(successModal, 'Please fill all required fields.', 'Error');
                    return;
                }
                if (password.length < 6) {
                    showModalMessage(successModal, 'Password must be at least 6 characters.', 'Error');
                    return;
                }
                if (password !== confirm) {
                    showModalMessage(successModal, 'Passwords do not match.', 'Error');
                    return;
                }

                createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        const donorRef = ref(database, 'donors/' + user.uid);
                        set(donorRef, {
                            ...donorData,
                            email: email,
                            createdAt: new Date().toISOString()
                        }).then(() => {
                            showModalMessage('success-modal', `Welcome, ${donorData.fullName}! Your donor profile was created successfully.`, 'Success');
                            joinForm.reset();
                        }).catch((error) => {
                            console.error("Error saving donor data:", error);
                            showModalMessage('success-modal', 'An error occurred while saving your profile data.', 'Error');
                        });
                    })
                    .catch((error) => {
                        const errorMessage = error.message;
                        showModalMessage('success-modal', `Signup failed: ${errorMessage}`, 'Error');
                    });
            });

            joinClear?.addEventListener('click', () => {
                joinForm.reset();
            });

            const searchForm = document.getElementById('search-form');
            const searchBlood = document.getElementById('search-blood');
            const eligibleOnlyCheckbox = document.getElementById('eligible-only');
            const searchResults = document.getElementById('search-results');

            function isDonorEligible(lastDonationDate) {
                if (!lastDonationDate) return true;
                const today = new Date();
                const lastDonation = new Date(lastDonationDate);
                const threeMonthsAgo = new Date(new Date().setMonth(today.getMonth() - 3));
                return lastDonation <= threeMonthsAgo;
            }

            function runSearch() {
                if (!searchResults) return;
                const blood = searchBlood?.value;
                const showEligibleOnly = eligibleOnlyCheckbox?.checked;
                if (blood === 'select') {
                    searchResults.innerHTML = '';
                    return;
                }
                let filtered = donorsList;
                if (blood && blood !== 'all' && blood !== 'select') {
                    filtered = filtered.filter(d => d.bloodGroup === blood);
                }
                if (showEligibleOnly) {
                    filtered = filtered.filter(d => isDonorEligible(d.lastDonateDate));
                }
                renderSearchResults(filtered);
            }

            // Submit filters locally; no extra DB read
            searchForm?.addEventListener('submit', (e) => {
                e.preventDefault();
                runSearch();
            });

            // Auto-refresh when filters change
            eligibleOnlyCheckbox?.addEventListener('change', runSearch);
            searchBlood?.addEventListener('change', runSearch);

            const loginBtn = document.getElementById('login-btn');
            const mobileLoginBtn = document.getElementById('mobile-login-btn');
            const loginForm = document.getElementById('login-form');

            function handleLoginClick() {
                if (currentUser) {
                    const userRef = ref(database, `donors/${currentUser.uid}`);
                    onValue(userRef, (snapshot) => {
                        const userData = snapshot.val() || {};
                        if (profileModal) {
                            document.getElementById('profile-fullName').value = userData.fullName || '';
                            document.getElementById('profile-email').value = userData.email || currentUser.email || '';
                            document.getElementById('profile-phone').value = userData.phone || '';
                            document.getElementById('profile-bloodGroup').value = userData.bloodGroup || '';
                            document.getElementById('profile-location').value = userData.location || '';
                            document.getElementById('profile-lastDonateDate').value = userData.lastDonateDate || '';
                            document.getElementById('profile-notes').value = userData.notes || '';
                            document.getElementById('profile-role').value = userData.role || 'member';
                            openModal(profileModal);
                        }
                    }, {
                        onlyOnce: true
                    });
                } else {
                    openModal(loginModal);
                }
            }

            loginBtn?.addEventListener('click', handleLoginClick);
            mobileLoginBtn?.addEventListener('click', () => {
                closeModal(mobileMenu);
                handleLoginClick();
            });

            loginForm?.addEventListener('submit', (ev) => {
                ev.preventDefault();
                const email = document.getElementById('login-email')?.value?.trim();
                const password = document.getElementById('login-password')?.value;
                signInWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        currentUser = userCredential.user;
                        updateLoginButtonState();
                        closeModal(loginModal);
                        handleLoginClick();
                    })
                    .catch((error) => {
                        const errorMessage = error.message;
                        showModalMessage('success-modal', `Login failed: ${errorMessage}`, 'Login Failed');
                    });
            });

            const forgotPasswordLink = document.getElementById('forgot-password-link');
            forgotPasswordLink?.addEventListener('click', (ev) => {
                ev.preventDefault();
                const emailInput = document.getElementById('login-email');
                const email = emailInput?.value?.trim();
                if (!email) {
                    showModalMessage('success-modal', 'Please enter your email to reset the password.', 'Email Required');
                    return;
                }
                sendPasswordResetEmail(auth, email)
                    .then(() => {
                        showModalMessage('success-modal', `A password reset link has been sent to ${email}. Please check your inbox.`, 'Password Reset Sent');
                        closeModal(loginModal);
                    })
                    .catch((error) => {
                        const errorMessage = error.message;
                        showModalMessage('success-modal', `Failed to send reset email: ${errorMessage}`, 'Password Reset Error');
                    });
            });

            // Show/hide password toggle in login modal
            const pwToggle = document.getElementById('toggle-password');
            const pwInput = document.getElementById('login-password');
            pwToggle?.addEventListener('click', () => {
                if (!pwInput) return;
                const isHidden = pwInput.getAttribute('type') === 'password';
                pwInput.setAttribute('type', isHidden ? 'text' : 'password');
                pwToggle.setAttribute('aria-label', isHidden ? 'Hide password' : 'Show password');
                pwToggle.setAttribute('title', isHidden ? 'Hide password' : 'Show password');
                const icon = pwToggle.querySelector('i');
                if (icon) {
                    icon.classList.toggle('fa-eye');
                    icon.classList.toggle('fa-eye-slash');
                }
            });

            const adminEventForm = document.getElementById('admin-event-form');
            if (adminEventForm) {
                adminEventForm.addEventListener('submit', (ev) => {
                    ev.preventDefault();
                    const fd = new FormData(adminEventForm);
                    const eventData = {
                        title: fd.get('title'),
                        date: fd.get('date'),
                        time: fd.get('time'),
                        location: fd.get('location'),
                        description: fd.get('description'),
                        id: fd.get('id')
                    };
                    saveEvent(eventData);
                });
            }

            const clearEventBtn = document.getElementById('clear-event-btn');
            if (clearEventBtn) {
                clearEventBtn.addEventListener('click', clearAdminEventForm);
            }

            const adminRecentDonorForm = document.getElementById('admin-recent-donor-form');
            if (adminRecentDonorForm) {
                adminRecentDonorForm.addEventListener('submit', (ev) => {
                    ev.preventDefault();
                    const fd = new FormData(adminRecentDonorForm);
                    const donorData = {
                        name: fd.get('donor-name'),
                        bloodGroup: fd.get('donor-blood-group'),
                        location: fd.get('donor-location'),
                        department: fd.get('donor-department'),
                        batch: fd.get('donor-batch'),
                        age: fd.get('donor-age'),
                        weight: fd.get('donor-weight'),
                        date: fd.get('donation-date')
                    };
                    if (!donorData.name || !donorData.bloodGroup || !donorData.location || !donorData.date) {
                        showModalMessage('success-modal', 'Please fill all required fields: Donor Name, Blood Group, Location, and Donation Date.', 'Error');
                        return;
                    }
                    onValue(statsRef, (snapshot) => {
                        const statsData = snapshot.val();
                        const currentLivesHelped = (statsData && statsData.livesHelped) ? Number(statsData.livesHelped) : 0;
                        const newLivesHelped = currentLivesHelped + 1;
                        const newDonationRef = push(recentDonationsRef);
                        const updates = {};
                        updates[`/recentDonations/${newDonationRef.key}`] = donorData;
                        updates['/stats/livesHelped'] = newLivesHelped;
                        update(ref(database), updates)
                            .then(() => {
                                showModalMessage('success-modal', 'Recent donor added and lives helped count incremented!', 'Success');
                                adminRecentDonorForm.reset();
                            })
                            .catch(error => showModalMessage('success-modal', `Failed to update data: ${error.message}`, 'Error'));
                    }, {
                        onlyOnce: true
                    });
                });
            }

            const adminMemberForm = document.getElementById('admin-member-form');
            if (adminMemberForm) {
                adminMemberForm.addEventListener('submit', (ev) => {
                    ev.preventDefault();
                    const fd = new FormData(adminMemberForm);
                    const memberId = fd.get('id');
                    const updatedData = {
                        fullName: fd.get('fullName'),
                        phone: fd.get('phone'),
                        bloodGroup: fd.get('bloodGroup'),
                        location: fd.get('location'),
                        lastDonateDate: fd.get('lastDonateDate'),
                        isPhoneHidden: fd.get('isPhoneHidden') === 'on',
                        publicComment: fd.get('publicComment')
                    };
                    if (memberId) {
                        update(ref(database, 'donors/' + memberId), updatedData)
                            .then(() => {
                                showModalMessage('success-modal', 'Member profile updated successfully!', 'Success');
                                clearAdminMemberForm();
                            })
                            .catch(error => showModalMessage('success-modal', `Failed to update member: ${error.message}`, 'Error'));
                    }
                });
            }

            const clearMemberBtn = document.getElementById('clear-member-btn');
            if (clearMemberBtn) {
                clearMemberBtn.addEventListener('click', clearAdminMemberForm);
            }

            profileForm?.addEventListener('submit', (e) => {
                e.preventDefault();
                if (!currentUser) return;
                const fd = new FormData(profileForm);
                const updatedData = {
                    fullName: fd.get('fullName')?.toString().trim(),
                    phone: fd.get('phone')?.toString().trim(),
                    bloodGroup: fd.get('bloodGroup')?.toString().trim(),
                    location: fd.get('location')?.toString().trim(),
                    lastDonateDate: fd.get('lastDonateDate')?.toString() || '',
                    notes: fd.get('notes')?.toString() || '',
                    email: currentUser.email,
                    role: fd.get('role')?.toString().trim()
                };
                const userRef = ref(database, 'donors/' + currentUser.uid);
                set(userRef, updatedData)
                    .then(() => {
                        showModalMessage('success-modal', 'Your profile has been updated successfully!', 'Success');
                        closeModal(profileModal);
                    })
                    .catch((error) => {
                        console.error("Error updating profile:", error);
                        showModalMessage('success-modal', `Failed to update profile: ${error.message}`, 'Error');
                    });
            });

            pfLogout?.addEventListener('click', () => {
                signOut(auth).then(() => {
                    closeModal(profileModal);
                    showModalMessage('success-modal', 'You have been logged out successfully.', 'Logout Successful');
                }).catch((error) => {
                    console.error("Logout failed:", error);
                    showModalMessage('success-modal', 'An error occurred during logout.', 'Logout Failed');
                });
            });

            pfDelete?.addEventListener('click', () => {
                if (!currentUser) {
                    showModalMessage('success-modal', 'You must be logged in to delete your profile.', 'Error');
                    return;
                }

                attachConfirmHandler(() => {
                    const user = auth.currentUser;
                    if (!user) {
                        showModalMessage('success-modal', 'You must be logged in to delete your profile.', 'Error');
                        return;
                    }
                    const donorRef = ref(database, 'donors/' + user.uid);
                    remove(donorRef)
                        .then(() => deleteUser(user))
                        .then(() => {
                            closeModal(document.getElementById('delete-confirm-modal'));
                            closeModal(profileModal);
                            showModalMessage('success-modal', 'Your profile has been deleted successfully.', 'Profile Deleted');
                        })
                        .catch((error) => {
                            if (error && error.code === 'auth/requires-recent-login') {
                                showModalMessage('success-modal', 'Please log in again to delete your profile.', 'Re-login Required');
                                signOut(auth);
                            } else {
                                console.error("Error deleting profile:", error);
                                showModalMessage('success-modal', `Failed to delete profile: ${error && error.message}`, 'Error');
                            }
                        });
                }, {
                    title: 'Confirm Delete',
                    message: 'Deleting your profile is permanent and cannot be undone.'
                });
            });

            document.addEventListener('keydown', (ev) => {
                if (ev.key === 'Escape') {
                    [successModal, profileModal, loginModal, deleteConfirmModal].forEach(m => closeModal(m));
                }
            });

            // Back-to-top button functionality with footer awareness
            const backToTopBtn = document.getElementById('back-to-top');
            const footerEl = document.querySelector('footer');

            function updateBackToTopVisibility() {
                if (!backToTopBtn) return;
                const beyond = window.scrollY > 300;
                let footerVisible = false;
                if ('IntersectionObserver' in window && footerEl) {
                    // handled by IO below; keep simple here
                } else {
                    // fallback: rough check using viewport bottom
                    const rect = footerEl?.getBoundingClientRect();
                    footerVisible = !!rect && rect.top < window.innerHeight;
                }
                if (beyond && !footerVisible) backToTopBtn.classList.add('show');
                else backToTopBtn?.classList.remove('show');
            }

            window.addEventListener('scroll', updateBackToTopVisibility);
            window.addEventListener('resize', updateBackToTopVisibility);
            updateBackToTopVisibility();

            // Use IntersectionObserver to hide FAB when footer is visible
            if ('IntersectionObserver' in window && footerEl && backToTopBtn) {
                const fabFooterIO = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        const footerVisible = entry.isIntersecting && entry.intersectionRatio > 0.01;
                        if (footerVisible) backToTopBtn.classList.remove('show');
                        else updateBackToTopVisibility();
                    });
                }, {
                    threshold: [0, 0.01, 0.1]
                });
                fabFooterIO.observe(footerEl);
            }

            backToTopBtn?.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Admin dashboard tabs
            const adminPanel = document.getElementById('admin-panel');
            if (adminPanel) {
                const tabs = adminPanel.querySelectorAll('.admin-tab');
                const panels = adminPanel.querySelectorAll('[data-panel]');
                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const target = tab.getAttribute('data-tab');
                        tabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        panels.forEach(p => {
                            p.classList.toggle('hidden', p.getAttribute('data-panel') !== target);
                        });
                    });
                });
            }

            // Float-In scroll reveal for cards; always float-out downward when leaving
            const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            let __floatIO__ = null;
            let __floatIO_lastY = window.scrollY;

            function registerFloatEls(root = document) {
                const els = root.querySelectorAll('.float-in:not([data-float-registered])');
                if (!els.length) return;
                if (reduceMotion) {
                    els.forEach(el => {
                        el.classList.add('is-visible');
                        el.setAttribute('data-float-registered', '1');
                    });
                    return;
                }
                if ('IntersectionObserver' in window) {
                    if (!__floatIO__) {
                        __floatIO__ = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                const scrollingDown = window.scrollY >= __floatIO_lastY;
                                if (entry.isIntersecting) {
                                    entry.target.classList.remove('is-out-up', 'is-out-down');
                                    if (scrollingDown) {
                                        entry.target.classList.remove('instant-visible');
                                        entry.target.classList.add('is-visible');
                                    } else {
                                        entry.target.classList.remove('is-visible');
                                        entry.target.classList.add('instant-visible');
                                    }
                                } else {
                                    // On exit, remove visibility classes without adding any exit animation
                                    entry.target.classList.remove('is-visible', 'instant-visible', 'is-out-up', 'is-out-down');
                                }
                            });
                            __floatIO_lastY = window.scrollY;
                        }, {
                            threshold: 0.15,
                            rootMargin: '0px 0px -5% 0px'
                        });
                    }
                    els.forEach((el, i) => {
                        el.style.setProperty('--delay', `${i * 120}ms`);
                        el.setAttribute('data-float-registered', '1');
                        __floatIO__.observe(el);
                    });
                } else {
                    els.forEach(el => {
                        el.classList.add('is-visible');
                        el.setAttribute('data-float-registered', '1');
                    });
                }
            }
            // expose for dynamic content sections
            window.registerFloatEls = registerFloatEls;
            // initial registration
            registerFloatEls(document);

            // Stats count-up animation
            const statNums = document.querySelectorAll('.stat-card .num');
            const fmt = (n) => n.toLocaleString();
            const animateCountTo = (el, target, duration = 1200, startOverride = undefined) => {
                const startVal = (startOverride != null) ?
                    Number(startOverride) :
                    Number(el.textContent.replace(/,/g, '') || '0');
                const start = performance.now();
                const ease = (t) => 1 - Math.pow(1 - t, 3);
                const step = (now) => {
                    const p = Math.min(1, (now - start) / duration);
                    const val = Math.round(startVal + (target - startVal) * ease(p));
                    el.textContent = fmt(val);
                    if (p < 1) requestAnimationFrame(step);
                };
                requestAnimationFrame(step);
            };
            // expose animator so early setCountTarget calls can animate when visible
            window.__animateCountTo__ = animateCountTo;

            let statsVisible = false;
            let statsWasVisible = false;
            const animateAllStats = () => {
                statNums.forEach(el => {
                    const target = Number(el.dataset.countTo || el.textContent || '0');
                    animateCountTo(el, target);
                });
            };
            const statsCard = document.querySelector('#donor-count')?.closest('.how-card') || document.querySelector('.stats-grid');
            if ('IntersectionObserver' in window && statsCard) {
                const statsIO = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        const nowVisible = entry.isIntersecting && entry.intersectionRatio > 0.30;
                        const becameVisible = nowVisible && !statsWasVisible;
                        statsVisible = nowVisible;
                        window.__statsVisible__ = statsVisible;
                        if (becameVisible) {
                            statNums.forEach(el => {
                                const target = Number(el.dataset.countTo || el.textContent || '0');
                                animateCountTo(el, target, 1500, 0);
                            });
                        }
                        statsWasVisible = nowVisible;
                    });
                }, {
                    threshold: [0, 0.25, 0.5, 0.75, 1]
                });
                statsIO.observe(statsCard);
            } else if (statsCard) {
                animateAllStats();
            }

            // Flush any pending counter targets that were set before DOM was ready
            if (__pendingCounts__.size) {
                for (const [id, v] of __pendingCounts__) {
                    const el = document.getElementById(id);
                    if (el) el.dataset.countTo = String(v);
                }
                __pendingCounts__.clear();
            }

            const searchBloodEl = document.getElementById('search-blood');
            const eligibleOnlyEl = document.getElementById('eligible-only');
            const searchResultsEl = document.getElementById('search-results');
            if (searchBloodEl && searchResultsEl && Array.isArray(donorsList)) {
                const blood = searchBloodEl.value;
                const showEligibleOnly = !!eligibleOnlyEl?.checked;
                if (blood === 'select') {
                    searchResultsEl.innerHTML = '';
                } else {
                    let filtered = donorsList;
                    if (blood && blood !== 'all' && blood !== 'select') {
                        filtered = filtered.filter(d => d.bloodGroup === blood);
                    }
                    if (showEligibleOnly) {
                        const isEligible = (lastDonationDate) => {
                            if (!lastDonationDate) return true;
                            const today = new Date();
                            const lastDonation = new Date(lastDonationDate);
                            const threeMonthsAgo = new Date(new Date().setMonth(today.getMonth() - 3));
                            return lastDonation <= threeMonthsAgo;
                        };
                        filtered = filtered.filter(d => isEligible(d.lastDonateDate));
                    }
                    renderSearchResults(filtered);
                }
            }
        };
    </script>

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-40 bg-white/90 backdrop-blur shadow-lg rounded-b-xl">
        <nav class="max-w-6xl mx-auto flex items-center justify-between px-4 py-2">
            <div class="flex items-center gap-3">
                <img src="image/blood-drop.png" alt="logo" class="h-10 w-10 header-logo border-red-600" />
                <span class="text-2xl font-extrabold text-red-700 tracking-tight site-title">Blood Donation Community</span>
                <span id="admin-badge"
                    class="hidden items-center gap-1 text-xs font-bold px-2 py-1 rounded bg-indigo-600 text-white shadow">Admin</span>
            </div>
            <div class="hidden md:flex items-center gap-1 text-base font-medium">
                <a id="nav-about-link" href="#about" class="px-3 py-2 rounded hover:bg-red-50 text-red-700">About</a>
                <a id="nav-how-link" href="#how" class="px-3 py-2 rounded hover:bg-red-50 text-red-700">Donation Guide</a>
                <a id="nav-events-link" href="#events" class="px-3 py-2 rounded hover:bg-red-50 text-red-700">Events</a>
                <a id="nav-join-link" href="#join" class="px-3 py-2 rounded hover:bg-red-50 text-red-700">Join</a>
                <a id="nav-search-link" href="#search" class="px-3 py-2 rounded hover:bg-red-50 text-red-700">Search</a>
                <a id="nav-contact-link" href="#contact"
                    class="px-3 py-2 rounded hover:bg-red-50 text-red-700">Contact</a>
                <a id="admin-nav-link" href="#admin-panel"
                    class="hidden px-3 py-2 rounded hover:bg-red-50 text-red-700">Dashboard</a>
                <button id="login-btn"
                    class="bg-red-600 text-white px-4 py-2 rounded-lg font-semibold shadow hover:bg-red-700 transition inline-flex items-center justify-center">Profile</button>
            </div>
            <div class="flex items-center gap-2">
                <button id="menu-toggle" class="md:hidden p-2 rounded-lg bg-red-100 text-red-700 hover:bg-red-200"
                    aria-label="Open menu" aria-controls="mobile-menu" aria-expanded="false" type="button">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden bg-white/95 shadow-lg rounded-b-xl">
            <div class="px-4 py-4 flex flex-col gap-2 text-red-700">
                <a id="mobile-about-link" href="#about" class="block px-3 py-2 rounded hover:bg-red-50">About</a>
                <a id="mobile-how-link" href="#how" class="block px-3 py-2 rounded hover:bg-red-50">Donation Guide</a>
                <a id="mobile-events-link" href="#events" class="block px-3 py-2 rounded hover:bg-red-50">Events</a>
                <a id="mobile-join-link" href="#join" class="block px-3 py-2 rounded hover:bg-red-50">Join</a>
                <a id="mobile-search-link" href="#search" class="block px-3 py-2 rounded hover:bg-red-50">Search</a>
                <a id="mobile-contact-link" href="#contact" class="block px-3 py-2 rounded hover:bg-red-50">Contact</a>
                <a id="admin-mobile-link" href="#admin-panel"
                    class="hidden block px-3 py-2 rounded hover:bg-red-50">Dashboard</a>
                <button id="mobile-login-btn"
                    class="block text-left px-3 py-2 rounded hover:bg-red-50 text-red-700 font-medium">Login</button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-4 lg:px-6">
        <section id="hero" class="relative flex flex-col md:flex-row items-center justify-between pt-4 pb-12 gap-6">
            <div class="flex-1 flex flex-col items-center justify-center text-center md:items-start md:text-left">
                <h1
                    class="text-4xl sm:text-5xl font-extrabold text-red-700 mb-4 tracking-tight break-words leading-tight hero-title">
                    Donate Blood Save Life
                </h1>
                <p class="mb-8 text-lg text-gray-700 max-w-xl mx-auto md:mx-0">Be a hero in your community. Register as
                    a donor,
                    find blood matches and join our events to help save lives every day.</p>
                <div
                    class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto items-center justify-center md:justify-start">
                    <a href="#join"
                        class="w-full sm:w-auto text-center bg-gradient-to-r from-red-600 to-red-400 text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:scale-105 transition inline-flex items-center justify-center gap-2 btn-breathe">
                        <i class="fa-solid fa-hand-holding-droplet"></i>
                        <span>Become a Donor</span>
                    </a>
                    <a href="#search"
                        class="w-full sm:w-auto text-center bg-white border-2 border-red-600 text-red-600 px-8 py-3 rounded-lg font-semibold shadow hover:bg-red-50 hover:scale-105 transition inline-flex items-center justify-center gap-2 btn-breathe">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <span>Search Donors</span>
                    </a>
                </div>
            </div>
            <div class="flex-1 flex justify-center items-center">
                <div class="relative">
                    <img src="image/blood-drop.png" alt="blood drop"
                        class="w-56 h-56 object-contain drop-shadow-xl animate-bounce-slow" />
                    <div
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-40 h-8 bg-red-200 rounded-full blur-xl opacity-60">
                    </div>
                </div>
            </div>
        </section>

        <section id="recent-donor" class="py-12">
            <div id="recentDonorCarousel" class="carousel slide" data-ride="carousel" data-interval="9000"
                data-pause="hover">
                <ol class="carousel-indicators">
                </ol>
                <div class="carousel-inner">
                </div>
                <a class="carousel-control-prev" href="#recentDonorCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#recentDonorCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </section>

        <section id="about" class="py-12">
            <div
                class="how-card tint-rose accent-rose rounded-xl shadow-lg p-8 transform transition hover:scale-105 float-in flex flex-col md:flex-row gap-8 items-start">
                <div
                    class="flex-shrink-0 flex items-center justify-center w-20 h-20 bg-red-100 rounded-full shadow icon-circle">
                    <svg class="w-12 h-12 text-red-600" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 2C12 2 7 8.5 7 12a5 5 0 0010 0c0-3.5-5-10-5-10z" />
                    </svg>
                </div>
                <div class="flex-1">
                    <h2 class="text-3xl font-extrabold text-red-700 mb-2 tracking-tight flex items-center gap-2">
                        About Us
                        <span
                            class="inline-block bg-red-600 text-white text-xs font-bold px-2 py-1 rounded">Community</span>
                    </h2>
                    <p class="text-justify">
                        <span class="font-semibold text-red-700">Blood Donation Community</span> is a passionate,
                        volunteer-driven
                        organization dedicated to saving lives through the power of blood donation. We connect willing
                        donors with
                        patients in urgent need, organize regular blood drives and partner with hospitals and local
                        groups to ensure
                        a safe and reliable blood supply for all.
                    </p>
                    <ul class="mt-6 list-disc pl-6 text-gray-700 space-y-2">
                        <li><span class="font-bold text-red-700">Our Mission:</span> To eliminate blood shortages and
                            make
                            lifesaving blood accessible to everyone, everywhere.</li>
                        <li><span class="font-bold text-red-700">What We Do:</span> Host donation events, maintain a
                            donor registry,
                            provide emergency matching and raise awareness about the importance of regular blood
                            donation.</li>
                        <li><span class="font-bold text-red-700">Community Impact:</span> Hundreds of lives saved each
                            year through
                            our network of donors and volunteers. We support hospitals, disaster relief and urgent
                            medical cases.</li>
                        <li><span class="font-bold text-red-700">Get Involved:</span> Anyone can join as a donor,
                            volunteer or
                            supporter. Together, we build a caring, responsive community that puts compassion into
                            action.</li>
                    </ul>
                    <p class="mt-6 text-gray-700 text-base">
                        <span class="font-semibold text-red-700">Join us to make a difference</span> - your single
                        donation can save
                        up to three lives. Stay connected for upcoming events, success stories and ways to help.
                    </p>
                </div>
            </div>
        </section>

        <section id="how" class="py-12">
            <div class="how-sticky-container">
                <div class="grid md:grid-cols-3 gap-6">
                    <article
                        class="how-card accent-amber tint-amber rounded-xl shadow-lg p-6 transform transition hover:scale-105 float-in">
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600">
                                <i class="fa-solid fa-clipboard-check text-xl" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-lg font-bold text-red-700">Check Eligibility</h4>
                        </div>
                        <p class="mt-4 text-gray-600">Be 18–60 years old, 50kg+, feeling well and fever‑free, with at
                            least 90 days since your last donation. Certain medicines, recent travel and illnesses may
                            defer donation.</p>
                        <a href="#" class="mt-4 inline-block text-sm text-red-600 font-medium hover:underline">Learn
                            more
                            →</a>
                    </article>

                    <article
                        class="how-card accent-emerald tint-emerald rounded-xl shadow-lg p-6 transform transition hover:scale-105 float-in">
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600">
                                <i class="fa-solid fa-user-plus text-xl" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-lg font-bold text-red-700">Register</h4>
                        </div>
                        <p class="mt-4 text-gray-600">Create your donor profile in minutes and keep your details up to
                            date. Choose privacy options (e.g., hide phone), track donations and get notified about
                            nearby
                            needs and events.</p>
                        <a href="#join"
                            class="mt-4 inline-block text-sm text-red-600 font-medium hover:underline">Register
                            now →</a>
                    </article>

                    <article
                        class="how-card accent-indigo tint-indigo rounded-xl shadow-lg p-6 transform transition hover:scale-105 float-in">
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600">
                                <i class="fa-solid fa-hand-holding-droplet text-xl" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-lg font-bold text-red-700">Donate & Save</h4>
                        </div>
                        <p class="mt-4 text-gray-600">Book a slot, bring a photo ID, eat light, stay hydrated and rest
                            for
                            a short while after. Safe, professional teams guide you through a 8–10 minute donation.</p>
                        <a href="#events" class="mt-4 inline-block text-sm text-red-600 font-medium hover:underline">See
                            events →</a>
                    </article>
                </div>
            </div>

            <div
                class="mt-8 how-card tint-rose rounded-xl shadow-lg p-6 transform transition hover:scale-105 float-in flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="stats-grid w-full md:w-auto">
                    <div class="stat-card text-center accent-indigo">
                        <div class="icon-circle-sm"><i class="fa-solid fa-users" aria-hidden="true"></i></div>
                        <div id="donor-count" class="num" data-count-to="0">0</div>
                        <div class="label">Registered Donors</div>
                    </div>
                    <div class="stat-card text-center accent-rose">
                        <div class="icon-circle-sm"><i class="fa-solid fa-heart-pulse" aria-hidden="true"></i></div>
                        <div id="lives-helped-count" class="num" data-count-to="0">0</div>
                        <div class="label">Lives Helped</div>
                    </div>
                    <div class="stat-card text-center accent-amber">
                        <div class="icon-circle-sm"><i class="fa-solid fa-calendar-days" aria-hidden="true"></i></div>
                        <div id="event-count" class="num" data-count-to="0">0</div>
                        <div class="label">Events This Year</div>
                    </div>
                </div>
                <div class="w-full md:w-auto">
                    <a href="#join"
                        class="w-full inline-flex items-center justify-center gap-2 bg-red-600 text-white px-5 py-2 rounded-md font-semibold">
                        <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
                        <span>Join Our Donor Network</span>
                    </a>
                </div>
            </div>
        </section>

        <section id="events" class="py-12">
            <h2 class="text-2xl font-extrabold text-red-700">Upcoming Events</h2>
            <p class="mt-2 text-gray-600">Join our community drives and help save lives - see the event details and
                register
                to participate.</p>
            <div id="public-events-list" class="mt-6 grid md:grid-cols-2 gap-6">
            </div>
        </section>

        <section id="search" class="py-12">
            <div class="bg-gradient-to-r from-red-50 to-white p-6 rounded-xl shadow-lg">
                <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
                    <div>
                        <h2 class="text-2xl font-extrabold text-red-700">Find Donors</h2>
                        <p class="mt-1 text-sm text-gray-600 max-w-xl">Search by blood group to find nearby donors
                            quickly. Connect directly once you locate a match.</p>
                    </div>
                    <div
                        class="w-full md:w-auto how-card compact search-card accent-sky float-in flex flex-col items-center md:items-start md:self-start gap-2">
                        <div class="flex items-center gap-2 -mb-1">
                            <div class="icon-circle-sm"><i class="fa-solid fa-magnifying-glass text-sm"
                                    aria-hidden="true"></i></div>
                            <h3 class="text-base font-bold text-red-700">Find Donors</h3>
                        </div>
                        <form id="search-form" class="flex flex-col sm:flex-row items-center gap-2 w-full">
                            <div class="field-icon-left w-full sm:flex-1">
                                <i class="fi fa-solid fa-droplet" style="top: 1.15rem"></i>
                                <select id="search-blood" aria-label="Blood group"
                                    class="w-full h-9 pl-10 pr-3 rounded-lg border border-gray-100 bg-white text-gray-700 text-sm">
                                    <option value="select" selected>Select donor</option>
                                    <option value="all">All Donor(s)</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                </select>
                            </div>
                        </form>
                        <div class="w-full flex justify-center items-center">
                            <input type="checkbox" id="eligible-only"
                                class="h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                            <label for="eligible-only"
                                class="ml-2 text-sm text-gray-700 font-medium whitespace-nowrap">Show only
                                eligible donors</label>
                        </div>
                    </div>
                </div>
                <div id="search-results" class="mt-6 flex flex-col gap-4">
                    <div class="text-gray-500 italic">No results yet. Perform a search to display donor entries here.
                    </div>
                </div>
            </div>
        </section>

        <section id="join" class="py-12">
            <div class="how-card gentle tint-emerald accent-emerald rounded-xl shadow-lg p-8 max-w-lg mx-auto float-in">
                <div class="text-center flex flex-col items-center gap-2">
                    <div class="icon-circle"><i class="fa-solid fa-user-check text-xl" aria-hidden="true"></i></div>
                    <h2 class="text-2xl font-extrabold text-red-700">Join us as a donor</h2>
                    <p class="mt-1 text-gray-600">Register to become part of our verified donor network. Add your
                        details and
                        create an account to manage your donations.</p>
                </div>

                <form id="join-form" class="mt-6 grid grid-cols-1 gap-4">
                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-user"></i>
                        <input name="fullName" id="fullName" type="text" placeholder=" " required
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="fullName"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Full
                            name</label>
                    </div>

                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-envelope"></i>
                        <input name="email" id="email" type="email" placeholder=" " required autocomplete="email"
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="email"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Email</label>
                    </div>

                    <div class="field-icon-left flex flex-col">
                        <label for="gender" class="text-sm text-gray-600 mb-2">Gender</label>
                        <i class="fi fa-solid fa-venus-mars" style="top: 3.1rem"></i>
                        <select name="gender" id="gender" required
                            class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none">
                            <option value="">Select gender</option>
                            <option>Male</option>
                            <option>Female</option>
                            <option>Other</option>
                        </select>
                    </div>

                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-phone"></i>
                        <input name="phone" id="phone" type="tel" placeholder=" " required autocomplete="tel"
                            inputmode="tel"
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="phone"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Phone
                            number</label>
                    </div>

                    <div class="field-icon-left flex flex-col">
                        <label for="bloodGroup" class="text-sm text-gray-600 mb-2">Blood group</label>
                        <i class="fi fa-solid fa-droplet" style="top: 3.1rem"></i>
                        <select name="bloodGroup" id="bloodGroup" required
                            class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none">
                            <option value="">Select group</option>
                            <option>A+</option>
                            <option>A-</option>
                            <option>B+</option>
                            <option>B-</option>
                            <option>O+</option>
                            <option>O-</option>
                            <option>AB+</option>
                            <option>AB-</option>
                        </select>
                    </div>

                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-location-dot"></i>
                        <input name="location" id="location" type="text" placeholder=" " required
                            autocomplete="address-level2"
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="location"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Current
                            Location</label>
                    </div>

                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-clock"></i>
                        <input name="lastDonateDate" id="lastDonateDate" type="date" placeholder=" "
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="lastDonateDate"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Last
                            blood donation</label>
                    </div>

                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-lock"></i>
                        <input name="password" id="password" type="password" placeholder=" " required
                            autocomplete="new-password"
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="password"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Password</label>
                    </div>

                    <div class="field-icon-left">
                        <i class="fi fa-solid fa-lock"></i>
                        <input name="confirmPassword" id="confirmPassword" type="password" placeholder=" " required
                            autocomplete="new-password"
                            class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                        <label for="confirmPassword"
                            class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Confirm
                            password</label>
                    </div>
                    <div class="flex gap-3">
                        <button id="join-submit" type="submit"
                            class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold shadow hover:bg-red-700 flex-1 md:flex-none inline-flex items-center justify-center gap-2">
                            <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
                            <span>Register</span>
                        </button>
                        <button id="join-clear" type="button"
                            class="border border-gray-300 px-4 py-3 rounded-lg flex-1 md:flex-none">Clear</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Admin Panel Section - Initially Hidden -->
        <section id="admin-panel" class="py-12 hidden">
            <h2 class="text-2xl font-extrabold text-red-700">Admin Dashboard</h2>
            <p class="mt-2 text-gray-600">Welcome, Admin! Here you can manage community events, update donor information
                and add recent donations.</p>

            <div class="mt-6 admin-tabs">
                <button type="button" class="admin-tab active" data-tab="events"><i
                        class="fa-solid fa-calendar-days"></i><span>Events</span></button>
                <button type="button" class="admin-tab" data-tab="recent"><i
                        class="fa-solid fa-hand-holding-droplet"></i><span>Recent Donor</span></button>
                <button type="button" class="admin-tab" data-tab="members"><i
                        class="fa-solid fa-users"></i><span>Members</span></button>
            </div>

            <div class="admin-tabpanel">
                <!-- Events Tab -->
                <div data-panel="events">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-red-600 mb-4">Event Details</h3>
                        <form id="admin-event-form" class="grid grid-cols-1 gap-4">
                            <input type="hidden" id="admin-event-id" name="id" />
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-heading"></i>
                                <input name="title" id="event-title" type="text" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="event-title"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Event
                                    Title</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-calendar-day"></i>
                                <input name="date" id="event-date" type="date" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="event-date"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Event
                                    Date</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-clock"></i>
                                <input name="time" id="event-time" type="time" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="event-time"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Event
                                    Time</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-location-dot"></i>
                                <input name="location" id="event-location" type="text" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="event-location"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Location</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-align-left"></i>
                                <textarea name="description" id="event-description" placeholder=" " required rows="2"
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none"></textarea>
                                <label for="event-description"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Description</label>
                            </div>
                            <div class="flex gap-3">
                                <button type="submit"
                                    class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold shadow hover:bg-red-700 flex-1">Save
                                    Event</button>
                                <button type="button" id="clear-event-btn"
                                    class="border border-gray-300 px-4 py-3 rounded-lg flex-1">Clear</button>
                            </div>
                        </form>
                        <div id="admin-events-list" class="mt-6 flex flex-col gap-4">
                        </div>
                    </div>
                </div>

                <!-- Recent Donor Tab -->
                <div data-panel="recent" class="hidden">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-red-600 mb-4">Recent Donor</h3>
                        <form id="admin-recent-donor-form" class="grid grid-cols-1 gap-4 mb-6">
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-user"></i>
                                <input name="donor-name" id="donor-name" type="text" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="donor-name"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Donor
                                    Name</label>
                            </div>
                            <div class="field-icon-left flex flex-col">
                                <label for="donor-blood-group" class="text-sm text-gray-600 mb-2">Blood Group</label>
                                <i class="fi fa-solid fa-droplet" style="top: 3.1rem"></i>
                                <select name="donor-blood-group" id="donor-blood-group" required
                                    class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none">
                                    <option value="">Select group</option>
                                    <option>A+</option>
                                    <option>A-</option>
                                    <option>B+</option>
                                    <option>B-</option>
                                    <option>O+</option>
                                    <option>O-</option>
                                    <option>AB+</option>
                                    <option>AB-</option>
                                </select>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-location-dot"></i>
                                <input name="donor-location" id="donor-location" type="text" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="donor-location"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Location</label>
                            </div>
                            <div class="field-icon-left flex flex-col">
                                <label for="donor-department"
                                    class="text-sm font-medium text-red-700 mb-1">Department</label>
                                <i class="fi fa-solid fa-building-columns" style="top: 3.1rem"></i>
                                <input name="donor-department" id="donor-department" type="text"
                                    class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                            </div>
                            <div class="field-icon-left flex flex-col">
                                <label for="donor-batch" class="text-sm font-medium text-red-700 mb-1">Batch</label>
                                <i class="fi fa-solid fa-layer-group" style="top: 3.1rem"></i>
                                <input name="donor-batch" id="donor-batch" type="text"
                                    class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                            </div>
                            <div class="field-icon-left flex flex-col">
                                <label for="donor-age" class="text-sm font-medium text-red-700 mb-1">Age</label>
                                <i class="fi fa-solid fa-person" style="top: 3.1rem"></i>
                                <input name="donor-age" id="donor-age" type="number"
                                    class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                            </div>
                            <div class="field-icon-left flex flex-col">
                                <label for="donor-weight" class="text-sm font-medium text-red-700 mb-1">Weight
                                    (kg)</label>
                                <i class="fi fa-solid fa-weight-scale" style="top: 3.1rem"></i>
                                <input name="donor-weight" id="donor-weight" type="number"
                                    class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-calendar-day"></i>
                                <input name="donation-date" id="donation-date" type="date" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="donation-date"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Donation
                                    Date</label>
                            </div>
                            <button type="submit"
                                class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold shadow hover:bg-red-700">Add
                                Last Donor Info</button>
                        </form>
                    </div>
                </div>

                <!-- Members Tab -->
                <div data-panel="members" class="hidden">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-red-600 mb-4">Member Management</h3>
                        <form id="admin-member-form" class="grid grid-cols-1 gap-4">
                            <input type="hidden" id="admin-member-id" name="id" />
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-user"></i>
                                <input name="fullName" id="admin-member-fullname" type="text" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="admin-member-fullname"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Full
                                    name</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-phone"></i>
                                <input name="phone" id="admin-member-phone" type="tel" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="admin-member-phone"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Phone
                                    number</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="admin-member-hide-phone" name="isPhoneHidden"
                                    class="h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                                <label for="admin-member-hide-phone" class="text-sm text-gray-700 font-medium">Hide
                                    phone
                                    number from public</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-comment-dots"></i>
                                <textarea name="publicComment" id="admin-member-comment"
                                    placeholder="Optional comment for public" rows="2"
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none"></textarea>
                                <label for="admin-member-comment"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Public
                                    comment (e.g., "Contact admin")</label>
                            </div>
                            <div class="field-icon-left flex flex-col">
                                <label for="admin-member-bloodGroup" class="text-sm text-gray-600 mb-2">Blood
                                    group</label>
                                <i class="fi fa-solid fa-droplet" style="top: 3.1rem"></i>
                                <select name="bloodGroup" id="admin-member-bloodGroup" required
                                    class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none">
                                    <option value="">Select group</option>
                                    <option>A+</option>
                                    <option>A-</option>
                                    <option>B+</option>
                                    <option>B-</option>
                                    <option>O+</option>
                                    <option>O-</option>
                                    <option>AB+</option>
                                    <option>AB-</option>
                                </select>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-location-dot"></i>
                                <input name="location" id="admin-member-location" type="text" placeholder=" " required
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="admin-member-location"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Current
                                    Location</label>
                            </div>
                            <div class="field-icon-left">
                                <i class="fi fa-solid fa-calendar-day"></i>
                                <input name="lastDonateDate" id="admin-member-lastDonateDate" type="date"
                                    placeholder=" "
                                    class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                                <label for="admin-member-lastDonateDate"
                                    class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Last
                                    blood donation</label>
                            </div>
                            <div class="flex gap-3 mt-4">
                                <button type="submit"
                                    class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold shadow hover:bg-red-700 flex-1">Save
                                    Changes</button>
                                <button type="button" id="clear-member-btn"
                                    class="border border-gray-300 px-4 py-3 rounded-lg flex-1">Clear</button>
                            </div>
                        </form>
                        <div id="admin-members-list" class="mt-6 flex flex-col gap-4">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-12">
            <div
                class="how-card gentle tint-rose accent-rose rounded-xl shadow-lg p-10 max-w-3xl mx-auto text-center float-in">
                <h2 class="text-2xl font-extrabold text-red-700">Contact</h2>
                <p class="mt-3 text-gray-600">Have questions or want to get involved? Reach out to us.</p>
                <div class="mt-6 flex flex-col sm:flex-row sm:items-center sm:justify-center gap-4">
                    <a href="mailto:bdc@bloodlife.org"
                        class="contact-chip inline-flex items-center gap-3 px-5 py-3 rounded-xl border border-red-100 bg-red-50/70 text-red-800 shadow-sm hover:shadow-md">
                        <span class="icon-circle-sm"><i class="fa-solid fa-at" aria-hidden="true"></i></span>
                        <span class="text-sm font-medium">bdc@bloodlife.org</span>
                    </a>
                    <a href="tel:+8801712460423"
                        class="contact-chip inline-flex items-center gap-3 px-5 py-3 rounded-xl border border-red-100 bg-red-50/70 text-red-800 shadow-sm hover:shadow-md">
                        <span class="icon-circle-sm"><i class="fa-solid fa-phone" aria-hidden="true"></i></span>
                        <span class="text-sm font-medium">+8801712460423</span>
                    </a>
                </div>
                <div class="mt-6">
                    <a href="#join"
                        class="inline-flex items-center gap-2 bg-red-600 text-white px-6 py-3 rounded-lg font-semibold shadow hover:bg-red-700 btn-breathe">
                        <i class="fa-solid fa-user-plus" aria-hidden="true"></i>
                        <span>Join as a Donor</span>
                    </a>
                </div>
            </div>
        </section>

    </main>

    <footer
        class="mt-16 relative text-gray-300 bg-slate-900/95 backdrop-blur rounded-t-2xl shadow-[0_-12px_40px_rgba(2,6,23,0.45)] overflow-hidden">
        <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-red-500/60 to-transparent">
        </div>
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center py-8">
            <p class="mb-3 footer-text opacity-90">© 2025 Life is Beautiful 💜</p>
            <div class="flex justify-center socials mt-2">
                <a href="https://github.com/MueidShahriar" aria-label="GitHub" target="_blank" rel="noopener noreferrer"
                    class="inline-flex items-center justify-center social-link rounded-full border border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white transition shadow-sm">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://www.facebook.com/mueid016" aria-label="Facebook" target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center justify-center social-link rounded-full border border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white transition shadow-sm">
                    <i class="fab fa-facebook"></i>
                </a>
            </div>
            <p class="mt-5 footer-text opacity-90">Developed by Md. Mueid Shahriar<br />CSE-16th, BAUET</p>
        </div>
    </footer>

    <div id="success-modal" class="fixed inset-0 hidden items-center justify-center z-[60]">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-md mx-4 z-10">
            <h3 class="text-lg font-bold text-red-700">Success!</h3>
            <p class="mt-2 text-gray-700"></p>
            <div class="mt-4 text-right">
                <button id="success-close" class="px-4 py-2 bg-red-600 text-white rounded">Close</button>
            </div>
        </div>
    </div>

    <div id="login-modal" class="fixed inset-0 hidden items-center justify-center z-50">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white modal-panel p-6 max-w-md mx-4 z-10">
            <div class="modal-title">
                <span class="icon-circle-sm"><i class="fa-solid fa-right-to-bracket" aria-hidden="true"></i></span>
                <h3 class="text-lg font-extrabold text-red-700">Login</h3>
            </div>
            <form id="login-form" class="mt-4">
                <div class="mb-3 field-icon-left">
                    <label for="login-email" class="block text-sm text-gray-600 mb-1">Email</label>
                    <i class="fi fa-solid fa-at"></i>
                    <input id="login-email" type="email" required
                        class="w-full rounded-lg border-2 border-gray-100 bg-white p-3 shadow-sm focus:border-red-300 focus:outline-none" />
                </div>
                <div class="mb-3 field-icon-left field-icon-right">
                    <label for="login-password" class="block text-sm text-gray-600 mb-1">Password</label>
                    <i class="fi fa-solid fa-key"></i>
                    <input id="login-password" type="password" required
                        class="w-full rounded-lg border-2 border-gray-100 bg-white p-3 shadow-sm focus:border-red-300 focus:outline-none" />
                    <button type="button" id="toggle-password" aria-label="Show password" title="Show password"
                        class="fr">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>
                <div class="flex items-center justify-end gap-4 mt-2">
                    <div class="flex gap-2 items-center">
                        <button type="submit"
                            class="bg-gradient-to-r from-red-600 to-red-500 text-white px-4 py-2 rounded font-semibold shadow hover:from-red-700 hover:to-red-600 transition inline-flex items-center gap-2">
                            <i class="fa-solid fa-right-to-bracket"></i>
                            <span>Sign in</span>
                        </button>
                        <button id="login-cancel" type="button"
                            class="border border-gray-300 text-gray-700 px-4 py-2 rounded font-semibold shadow hover:bg-gray-100 transition inline-flex items-center gap-2">
                            <i class="fa-solid fa-xmark"></i>
                            <span>Cancel</span>
                        </button>
                    </div>
                </div>
                <a id="forgot-password-link" href="#"
                    class="block text-center mt-2 text-xs text-red-700 hover:underline hover:text-red-900 transition-colors duration-200 inline-flex items-center justify-center gap-1 w-full">
                    <i class="fa-solid fa-circle-question"></i>
                    <span>Forgot Password?</span>
                </a>
            </form>
        </div>
    </div>

    <div id="profile-modal" class="fixed inset-0 hidden items-center justify-center z-50 overflow-y-auto">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-xl mx-auto my-8 z-10">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-red-700">My Profile</h3>
                <button id="pf-close" class="text-gray-400 hover:text-gray-600 transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="profile-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-user"></i>
                    <input name="fullName" id="profile-fullName" type="text" placeholder=" " required
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="profile-fullName"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Full
                        name</label>
                </div>
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-envelope"></i>
                    <input name="email" id="profile-email" type="email" placeholder=" " required readonly
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-gray-100 cursor-not-allowed p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="profile-email" class="absolute left-4 top-3 text-gray-400 transition-all 
                        peer-placeholder-shown:top-3 peer-placeholder-shown:text-base 
                        peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 
                        peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 
                        pointer-events-none bg-gray-100 px-1"> Email (cannot be changed)
                    </label>
                </div>
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-phone"></i>
                    <input name="phone" id="profile-phone" type="tel" placeholder=" " required
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="profile-phone"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Phone
                        number</label>
                </div>
                <div class="field-icon-left flex flex-col">
                    <label for="profile-bloodGroup" class="text-sm text-gray-600 mb-2">Blood group</label>
                    <i class="fi fa-solid fa-droplet" style="top: 3.1rem"></i>
                    <select name="bloodGroup" id="profile-bloodGroup" required
                        class="block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none">
                        <option value="">Select group</option>
                        <option>A+</option>
                        <option>A-</option>
                        <option>B+</option>
                        <option>B-</option>
                        <option>O+</option>
                        <option>O-</option>
                        <option>AB+</option>
                        <option>AB-</option>
                    </select>
                </div>
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-location-dot"></i>
                    <input name="location" id="profile-location" type="text" placeholder=" " required
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="profile-location"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Current
                        Location</label>
                </div>
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-calendar-day"></i>
                    <input name="lastDonateDate" id="profile-lastDonateDate" type="date" placeholder=" "
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="profile-lastDonateDate"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Last
                        blood donation</label>
                </div>
                <div class="field-icon-left md:col-span-2">
                    <i class="fi fa-solid fa-note-sticky"></i>
                    <textarea name="notes" id="profile-notes" placeholder=" " rows="2"
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none"></textarea>
                    <label for="profile-notes"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Additional
                        Notes</label>
                </div>
                <div class="relative hidden">
                    <input name="role" id="profile-role" type="text" readonly
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-4 pl-10 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="profile-role"
                        class="absolute left-10 top-4 text-gray-400 transition-all peer-placeholder-shown:top-4 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">User
                        Role</label>
                </div>
                <div class="flex flex-wrap gap-3 mt-4 md:col-span-2">
                    <button type="submit"
                        class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold shadow hover:bg-red-700 flex-1">Save
                        Changes</button>
                    <button id="pf-logout" type="button"
                        class="border border-gray-300 px-4 py-3 rounded-lg flex-1">Logout</button>
                    <!-- Delete Profile Button -->
                    <button id="pf-delete" type="button"
                        class="border border-red-300 text-red-600 px-4 py-3 rounded-lg flex-1 hover:bg-red-50">Delete
                        Profile</button>
                </div>
            </form>
        </div>
    </div>

    <div id="delete-confirm-modal" class="fixed inset-0 hidden items-center justify-center z-50">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-sm mx-4 z-10 text-center">
            <h3 class="text-xl font-bold text-red-700 mb-2">Are you sure?</h3>
            <p class="text-gray-700">Deleting your profile is permanent and cannot be undone. All your donor information
                will be removed.</p>
            <div class="mt-6 flex justify-center gap-4">
                <button id="delete-cancel"
                    class="px-5 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Cancel</button>
                <button id="delete-confirm" class="px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Delete
                    Permanently</button>
            </div>
        </div>
    </div>

    <div id="fab-wrap"
        class="z-40 flex flex-col items-end gap-2">
        <a href="#" id="back-to-top"
            class="bg-red-600 text-white w-12 h-12 rounded-full shadow-lg hover:bg-red-700 transition-all text-lg flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
            </svg>
        </a>
    </div>
</body>

</html>

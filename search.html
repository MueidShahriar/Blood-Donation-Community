<!DOCTYPE html>
<html lang="en" class="antialiased scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Search Donors - Blood Donation Community</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="shortcut icon" href="image/blood-drop.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="assets/css/common.css">
    <link rel="stylesheet" href="assets/css/index.css">
    <meta name="description" content="Search and find blood donors by blood group from Blood Donation Community.">
    <style>
        #page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center
        }

        #page-loader.fade-out {
            opacity: 0;
            visibility: hidden;
            transition: opacity .5s, visibility .5s
        }

        body.loading>*:not(#page-loader):not(script) {
            opacity: 0 !important;
            visibility: hidden !important
        }
    </style>
</head>

<body class="bg-white text-gray-900 loading" style="font-family:'Inter',sans-serif;">

    <div id="page-loader">
        <div class="logo-wrapper">
            <div class="logo-base">
                <img src="image/blood-drop.png" alt="" />
            </div>
            <div class="logo-fill">
                <img src="image/blood-drop.png" alt="Loading" />
            </div>
        </div>
    </div>

    <header class="fixed top-0 left-0 right-0 z-40 bg-white/90 backdrop-blur shadow-lg rounded-b-xl">
        <nav class="max-w-6xl mx-auto flex items-center justify-between px-4 sm:px-5 lg:px-6 py-2">
            <div class="flex items-center gap-3">
                <a href="index.html" class="flex items-center gap-3 text-decoration-none">
                    <img src="image/blood-drop.png" alt="logo" class="h-10 w-10 header-logo border-red-600" />
                    <span class="text-2xl font-extrabold text-red-700 tracking-tight site-title" data-i18n="siteTitle">Blood Donation
                        Community</span>
                </a>
                <span id="admin-badge"
                    class="hidden items-center gap-1 text-xs font-bold px-2 py-1 rounded bg-red-600 text-white shadow"
                    data-i18n="adminBadge">Admin</span>
            </div>
            <div class="hidden md:flex items-center gap-1 text-base font-medium">
                <a id="nav-home-link" href="index.html" class="px-3 py-2 rounded hover:bg-red-50 text-red-700" data-i18n="navHome">Home</a>
                <a id="nav-about-link" href="about.html" class="px-3 py-2 rounded hover:bg-red-50 text-red-700" data-i18n="navAbout">About</a>
                <a id="nav-how-link" href="donationGuide.html" class="px-3 py-2 rounded hover:bg-red-50 text-red-700" data-i18n="navHow">Donation Guide</a>
                <a id="nav-events-link" href="events.html" class="px-3 py-2 rounded hover:bg-red-50 text-red-700" data-i18n="navEvents">Events</a>
                <a id="nav-join-link" href="join.html" class="px-3 py-2 rounded hover:bg-red-50 text-red-700" data-i18n="navJoin">Join</a>
                <a id="nav-search-link" href="search.html" class="px-3 py-2 rounded bg-red-50 text-red-700 font-bold" data-i18n="navSearch">Search</a>
                <a id="nav-contact-link" href="index.html#contact" class="px-3 py-2 rounded hover:bg-red-50 text-red-700" data-i18n="navContact">Contact</a>
                <a id="nav-dashboard-link" href="index.html#admin-panel" class="hidden px-3 py-2 rounded hover:bg-red-50 text-red-700 font-bold" data-i18n="navDashboard">Dashboard</a>
            </div>
            <div class="flex items-center gap-4">
                <button id="login-btn"
                    class="desktop-only inline-flex bg-red-600 text-white px-4 py-2 rounded-lg font-semibold shadow hover:bg-red-700 transition items-center justify-center"
                    data-i18n="btnLogin">Login</button>
            </div>
            <div class="flex items-center gap-2">
                <button id="menu-toggle" class="md:hidden p-2 rounded-lg bg-red-100 text-red-700 hover:bg-red-200"
                    aria-label="Open menu" type="button">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden bg-white/95 shadow-lg rounded-b-xl">
            <div class="px-4 py-4 flex flex-col gap-2 text-red-700">
                <a id="mobile-home-link" href="index.html" class="block px-3 py-2 rounded hover:bg-red-50" data-i18n="navHome">Home</a>
                <a id="mobile-about-link" href="about.html" class="block px-3 py-2 rounded hover:bg-red-50" data-i18n="navAbout">About</a>
                <a id="mobile-how-link" href="donationGuide.html" class="block px-3 py-2 rounded hover:bg-red-50" data-i18n="navHow">Donation Guide</a>
                <a id="mobile-events-link" href="events.html" class="block px-3 py-2 rounded hover:bg-red-50" data-i18n="navEvents">Events</a>
                <a id="mobile-join-link" href="join.html" class="block px-3 py-2 rounded hover:bg-red-50" data-i18n="navJoin">Join</a>
                <a id="mobile-search-link" href="search.html" class="block px-3 py-2 rounded bg-red-50 font-bold" data-i18n="navSearch">Search</a>
                <a id="mobile-contact-link" href="index.html#contact" class="block px-3 py-2 rounded hover:bg-red-50" data-i18n="navContact">Contact</a>
                <a id="admin-mobile-link" href="index.html#admin-panel" class="hidden px-3 py-2 rounded hover:bg-red-50"
                    data-i18n="navDashboard">Dashboard</a>
                <hr class="border-t border-red-200 my-1">
                <button id="mobile-login-btn"
                    class="block text-left px-3 py-2 rounded hover:bg-red-50 text-red-700 font-medium"
                    data-i18n="btnLogin">ðŸ”‘ Login</button>
                <button id="mobile-logout-btn"
                    class="hidden text-left px-3 py-2 rounded hover:bg-red-50 text-red-600 font-medium">
                    ðŸšª Logout
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-4 lg:px-6" style="padding-top: 5rem;">

        <section id="search" class="py-12">
            <div class="bg-gradient-to-r from-red-50 to-white p-6 rounded-xl shadow-lg">
                <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
                    <div>
                        <h2 class="text-2xl font-extrabold text-red-700" data-i18n="searchTitle">Find Donors</h2>
                        <p class="mt-2 text-sm text-gray-600 max-w-xl" data-i18n="searchDescription">Search by blood
                            group to find nearby donors
                            quickly. Connect directly once you locate a match.</p>
                    </div>
                    <div
                        class="w-full md:w-auto how-card compact search-card accent-sky flex flex-col items-center md:items-start md:self-start gap-2">
                        <div class="flex items-center gap-2 -mb-1">
                            <div class="icon-circle-sm"><i class="fa-solid fa-magnifying-glass text-sm"
                                    aria-hidden="true"></i></div>
                            <h3 class="text-base font-bold text-red-700" data-i18n="searchTitle">Find Donors</h3>
                        </div>
                        <form id="search-form" class="flex flex-col sm:flex-row items-center gap-2 w-full">
                            <div class="field-icon-left w-full sm:flex-1">
                                <i class="fi fa-solid fa-droplet" style="top: 1.15rem"></i>
                                <select id="search-blood" aria-label="Blood group"
                                    class="w-full h-9 pl-10 pr-3 rounded-lg border border-gray-100 bg-white text-gray-700 text-sm">
                                    <option value="select" selected data-i18n="searchSelectDonor">Select donor</option>
                                    <option value="all" data-i18n="searchAllDonors">All Donor(s)</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                </select>
                            </div>
                        </form>
                        <div class="w-full flex justify-center items-center">
                            <input type="checkbox" id="eligible-only"
                                class="h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                            <label for="eligible-only" class="ml-2 text-sm text-gray-700 font-medium whitespace-nowrap"
                                data-i18n="searchEligibleOnly">Show only
                                eligible donors</label>
                        </div>
                    </div>
                </div>
                <div id="search-loading" class="search-loading hidden mt-6" aria-live="polite" aria-hidden="true">
                    <span class="search-loading__spinner" aria-hidden="true"></span>
                    <span class="search-loading__text" data-i18n="searchLoading">Loading donors...</span>
                </div>
                <div id="search-results" class="mt-6 flex flex-col gap-4">
                    <div class="text-gray-500 italic" data-i18n="searchNoResults">No results yet. Perform a search to
                        display donor entries here.
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer
        class="mt-16 relative text-gray-300 bg-slate-900/95 backdrop-blur rounded-t-2xl shadow-[0_-12px_40px_rgba(2,6,23,0.45)] overflow-hidden">
        <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-red-500/60 to-transparent">
        </div>
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
            <div class="footer-grid">
                <div class="footer-brand">
                    <div class="footer-brand-title">
                        <img src="image/blood-drop.png" alt="Blood Donation Community" />
                        <span data-i18n="siteTitle">Blood Donation Community</span>
                    </div>
                    <p data-i18n="footerBrandDesc">A passionate, volunteer-driven organization dedicated to saving lives through the power of blood
                        donation. We connect donors with patients in urgent need.</p>
                    <div class="footer-socials mt-2">
                        <a href="https://www.facebook.com/share/1CLTZN8DmU/?mibextid=wwXIfr" class="social-facebook" aria-label="Facebook" target="_blank"
                            rel="noopener noreferrer">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.linkedin.com/company/bauet-blood-donation-club/" class="social-linkedin" aria-label="LinkedIn" target="_blank"
                            rel="noopener noreferrer">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://wa.me/8801712460423" class="social-whatsapp" aria-label="WhatsApp" target="_blank"
                            rel="noopener noreferrer">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="footer-col-title" data-i18n="footerQuickLinks">QUICK LINKS</h4>
                    <ul class="footer-links">
                        <li><a href="about.html"><i class="fa-solid fa-chevron-right"></i> <span
                                    data-i18n="navAbout">About</span></a></li>
                        <li><a href="donationGuide.html"><i class="fa-solid fa-chevron-right"></i> <span
                                    data-i18n="navHow">Donation Guide</span></a></li>
                        <li><a href="events.html"><i class="fa-solid fa-chevron-right"></i> <span
                                    data-i18n="navEvents">Events</span></a></li>
                        <li><a href="join.html"><i class="fa-solid fa-chevron-right"></i> <span
                                    data-i18n="navJoin">Join</span></a></li>
                        <li><a href="search.html"><i class="fa-solid fa-chevron-right"></i> <span
                                    data-i18n="navSearch">Search</span></a></li>
                        <li><a href="donor.html"><i class="fa-solid fa-chevron-right"></i> <span>Donor Card</span></a></li>
                        <li><a href="certificate.html"><i class="fa-solid fa-chevron-right"></i> <span>Certificate</span></a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-col-title" data-i18n="footerContactInfo">Contact Info</h4>
                    <ul class="footer-links">
                        <li><a href="mailto:bauet.bdc@gmail.com"><i class="fa-solid fa-envelope"></i>
                                <span>bauet.bdc@gmail.com</span></a></li>
                        <li><a href="tel:+8801712460423"><i class="fa-solid fa-phone"></i>
                                <span>+8801712460423</span></a></li>
                        <li><a href="index.html#contact"><i class="fa-solid fa-message"></i> <span
                                    data-i18n="navContact">Contact</span></a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-feedback-wrap">
                <button id="feedback-btn" type="button"
                    class="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-lg bg-red-600/90 text-white text-sm font-semibold shadow hover:bg-red-700 transition">
                    <i class="fa-solid fa-comment-dots" aria-hidden="true"></i>
                    <span data-i18n="footerFeedback">Share Feedback</span>
                </button>
            </div>
            <hr class="footer-divider" />
            <div class="footer-bottom">
                <p class="footer-copy">
                    &copy; 2026 <a href="index.html">Blood Donation Community</a> All rights reserved.
                </p>
                <p class="footer-copy">
                    <span data-i18n="footerDeveloper">Developed by Md. Mueid Shahriar, </span> CSE-16th, BAUET
                </p>
            </div>
        </div>
    </footer>

    <div id="fab-wrap" class="fixed bottom-6 right-6 z-40 flex flex-col items-end gap-2">
        <a href="#" id="back-to-top"
            class="bg-red-600 text-white w-12 h-12 rounded-full shadow-lg hover:bg-red-700 transition-all text-lg flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
            </svg>
        </a>
    </div>

    <div id="login-modal" class="fixed inset-0 hidden items-center justify-center z-50">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white modal-panel p-6 max-w-md mx-4 z-10">
            <div class="modal-title">
                <span class="icon-circle-sm"><i class="fa-solid fa-right-to-bracket" aria-hidden="true"></i></span>
                <h3 class="text-lg font-extrabold text-red-700" data-i18n="loginTitle">Login</h3>
            </div>
            <form id="login-form" class="mt-4">
                <div class="mb-3 field-icon-left">
                    <label for="login-email" class="block text-sm text-gray-600 mb-1" data-i18n="loginEmail">Email</label>
                    <div class="input-wrap">
                        <i class="fi fa-solid fa-at"></i>
                        <input id="login-email" type="email" required
                            class="w-full rounded-lg border-2 border-gray-100 bg-white p-3 shadow-sm focus:border-red-300 focus:outline-none" />
                    </div>
                </div>
                <div class="mb-3 field-icon-left field-icon-right">
                    <label for="login-password" class="block text-sm text-gray-600 mb-1" data-i18n="loginPassword">Password</label>
                    <div class="input-wrap">
                        <i class="fi fa-solid fa-key"></i>
                        <input id="login-password" type="password" required
                            class="w-full rounded-lg border-2 border-gray-100 bg-white p-3 shadow-sm focus:border-red-300 focus:outline-none" />
                        <button type="button" id="toggle-password" aria-label="Show password" title="Show password"
                            class="fr">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-4 mt-2">
                    <div class="flex gap-2 items-center">
                        <button type="submit"
                            class="bg-gradient-to-r from-red-600 to-red-500 text-white px-4 py-2 rounded font-semibold shadow hover:from-red-700 hover:to-red-600 transition inline-flex items-center gap-2">
                            <i class="fa-solid fa-right-to-bracket"></i>
                            <span data-i18n="loginSignIn">Sign in</span>
                        </button>
                        <button id="login-cancel" type="button"
                            class="border border-gray-300 text-gray-700 px-4 py-2 rounded font-semibold shadow hover:bg-gray-100 transition inline-flex items-center gap-2">
                            <i class="fa-solid fa-xmark"></i>
                            <span data-i18n="modalCancel">Cancel</span>
                        </button>
                    </div>
                </div>
                <a id="forgot-password-link" href="#"
                    class="block text-center mt-2 text-xs text-red-700 hover:underline hover:text-red-900 transition-colors duration-200 inline-flex items-center justify-center gap-1 w-full">
                    <i class="fa-solid fa-circle-question"></i>
                    <span data-i18n="loginForgotPassword">Forgot Password?</span>
                </a>
            </form>
        </div>
    </div>

    <div id="success-modal" class="fixed inset-0 hidden items-center justify-center z-[60]">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-md mx-4 z-10">
            <h3 class="text-lg font-bold text-red-700">Success!</h3>
            <p class="mt-2 text-gray-700"></p>
            <div class="mt-4 text-right">
                <button id="success-close" class="px-4 py-2 bg-red-600 text-white rounded">Close</button>
            </div>
        </div>
    </div>

    <div id="feedback-modal" class="fixed inset-0 hidden items-center justify-center z-50">
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-md mx-4 z-10 w-full">
            <div class="flex items-start justify-between mb-3">
                <div>
                    <h3 class="text-lg font-bold text-red-700" data-i18n="feedbackTitle">Share Your Feedback</h3>
                    <p class="text-sm text-gray-600" data-i18n="feedbackDesc">Let us know how we can improve the Blood Donation Community.</p>
                </div>
                <button type="button" id="feedback-close" class="text-gray-400 hover:text-gray-600"
                    aria-label="Close feedback form">
                    <i class="fa-solid fa-xmark" aria-hidden="true"></i>
                </button>
            </div>
            <form id="feedback-form" class="grid gap-4">
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-user"></i>
                    <input name="name" id="feedback-name" type="text" placeholder=" "
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="feedback-name"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3.5 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Name</label>
                </div>
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-envelope"></i>
                    <input name="email" id="feedback-email" type="email" placeholder=" " autocomplete="email"
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none" />
                    <label for="feedback-email"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3.5 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Email
                        (optional)</label>
                </div>
                <div class="field-icon-left">
                    <i class="fi fa-solid fa-comment"></i>
                    <textarea name="message" id="feedback-message" placeholder=" " required rows="4"
                        class="peer block w-full rounded-lg border-2 border-gray-100 bg-white p-3 text-gray-900 shadow-sm focus:border-red-300 focus:outline-none"></textarea>
                    <label for="feedback-message"
                        class="absolute left-4 top-3 text-gray-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-3 peer-focus:text-sm peer-focus:text-red-700 peer-valid:-top-3 peer-valid:text-sm peer-valid:text-red-700 pointer-events-none bg-white px-1">Your
                        feedback</label>
                </div>
                <div class="flex justify-end gap-3">
                    <button type="button" id="feedback-cancel"
                        class="px-4 py-2 rounded-lg border border-gray-200" data-i18n="modalCancel">Cancel</button>
                    <button type="submit"
                        class="px-5 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 flex items-center gap-2">
                        <i class="fa-solid fa-paper-plane" aria-hidden="true"></i>
                        <span data-i18n="feedbackSend">Send</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="assets/js/viewport.js" defer></script>
    <script type="module" src="assets/js/page-common.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
        import { firebaseConfig } from "./assets/js/modules/firebase-config.js";
        import { normalizeBloodGroup, buildDonorIndex, isDonorEligible } from "./assets/js/modules/utils.js";
        import { renderSearchResults, setSearchLoading, runSearch, initSearch } from "./assets/js/modules/search.js";
        import state from "./assets/js/modules/state.js";

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        const donorsRef = ref(database, 'donors');
        onValue(donorsRef, (snapshot) => {
            const data = snapshot.val();
            state.donorsList = [];
            if (data && typeof data === 'object') {
                for (const key in data) {
                    if (Object.prototype.hasOwnProperty.call(data, key)) {
                        state.donorsList.push({ id: key, ...data[key] });
                    }
                }
            }

            state.donorsByGroup.clear();
            state.donorsList.forEach(d => {
                const g = normalizeBloodGroup(d?.bloodGroup);
                if (!g) return;
                if (!state.donorsByGroup.has(g)) state.donorsByGroup.set(g, []);
                state.donorsByGroup.get(g).push(d);
            });

            initSearch();
        }, err => {
            console.error('Failed to load donors:', err);
        });
    </script>
</body>

</html>
